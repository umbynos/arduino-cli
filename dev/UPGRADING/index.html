
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Arduino Command Line Interface">
      
      
      
      
        <link rel="canonical" href="https://arduino.github.io/arduino-cli/dev/UPGRADING/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-7.3.6">
    
    
      
        <title>Upgrading - Arduino CLI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="orange">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upgrading" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Arduino CLI" class="md-header__button md-logo" aria-label="Arduino CLI" data-md-component="logo">
      
  <img src="../img/icon_mac_light.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Arduino CLI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Upgrading
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/arduino/arduino-cli" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    arduino/arduino-cli
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Arduino CLI" class="md-nav__button md-logo" aria-label="Arduino CLI" data-md-component="logo">
      
  <img src="../img/icon_mac_light.png" alt="logo">

    </a>
    Arduino CLI
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/arduino/arduino-cli" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    arduino/arduino-cli
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Upgrading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Upgrading
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0280" class="md-nav__link">
    0.28.0
  </a>
  
    <nav class="md-nav" aria-label="0.28.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-libraries-name-handling" class="md-nav__link">
    Breaking changes in libraries name handling
  </a>
  
    <nav class="md-nav" aria-label="Breaking changes in libraries name handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grpc-message-ccarduinoclicommandsv1library-no-longer-has-real_name-field" class="md-nav__link">
    gRPC message cc.arduino.cli.commands.v1.Library no longer has real_name field
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-readable-lib-list-output-no-longer-has-real-name-field" class="md-nav__link">
    Machine readable lib list output no longer has "real name" field
  </a>
  
    <nav class="md-nav" aria-label="Machine readable lib list output no longer has "real name" field">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    JSON
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaml" class="md-nav__link">
    YAML
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerinstall-removed-parameter-installlocation" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibrariesManager.Install removed parameter installLocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerfindbyreference-now-returns-a-list-of-libraries" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibrariesManager.FindByReference now returns a list of libraries.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibraryalternatives-removed" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibraryAlternatives removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-updateindex-api-both-grpc-and-go-lang" class="md-nav__link">
    Breaking changes in UpdateIndex API (both gRPC and go-lang)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0270" class="md-nav__link">
    0.27.0
  </a>
  
    <nav class="md-nav" aria-label="0.27.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-golang-api-githubcomarduinoarduino-cliarduinocorespackagemanagerpackagemanager" class="md-nav__link">
    Breaking changes in golang API github.com/arduino/arduino-cli/arduino/cores/packagemanager.PackageManager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#some-grpc-mapped-methods-now-accepts-the-grpc-request-instead-of-the-instance-id-as-parameter" class="md-nav__link">
    Some gRPC-mapped methods now accepts the gRPC request instead of the instance ID as parameter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-detection-of-arduino-ide-bundling" class="md-nav__link">
    Removed detection of Arduino IDE bundling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-enumeration-renamed-enum-value-in-ccarduinoclicommandsv1librarylocation" class="md-nav__link">
    gRPC enumeration renamed enum value in cc.arduino.cli.commands.v1.LibraryLocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-lang-api-change-in-librarymanager" class="md-nav__link">
    go-lang API change in LibraryManager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-lang-functions-changes-in-githubcomarduinoarduino-cliconfiguration" class="md-nav__link">
    go-lang functions changes in github.com/arduino/arduino-cli/configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-utilsfeedstreamto-and-utilsconsumestreamfrom" class="md-nav__link">
    Removed utils.FeedStreamTo and utils.ConsumeStreamFrom
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0260" class="md-nav__link">
    0.26.0
  </a>
  
    <nav class="md-nav" aria-label="0.26.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicommandsdownloadtoolrelease-and-installtoolrelease-functions-have-been-removed" class="md-nav__link">
    github.com/arduino/arduino-cli/commands.DownloadToolRelease, and InstallToolRelease functions have been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicommandsoutdated-and-upgrade-functions-have-been-moved" class="md-nav__link">
    github.com/arduino/arduino-cli/commands.Outdated and Upgrade functions have been moved
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduino-cliarduinocorespackagemanagerpackagemanager-methods-and-fields-change" class="md-nav__link">
    github.com/arduino-cli/arduino/cores/packagemanager.PackageManager methods and fields change
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0250" class="md-nav__link">
    0.25.0
  </a>
  
    <nav class="md-nav" aria-label="0.25.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go-lang-function-githubcomarduinoarduino-cliarduinoutilsfeedstreamto-has-been-changed" class="md-nav__link">
    go-lang function github.com/arduino/arduino-cli/arduino/utils.FeedStreamTo has been changed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0240" class="md-nav__link">
    0.24.0
  </a>
  
    <nav class="md-nav" aria-label="0.24.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grpc-monitor-service-and-related-grpc-calls-have-been-removed" class="md-nav__link">
    gRPC Monitor service and related gRPC calls have been removed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0230" class="md-nav__link">
    0.23.0
  </a>
  
    <nav class="md-nav" aria-label="0.23.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arduino-ide-builtin-libraries-are-now-excluded-from-the-build-when-running-arduino-cli-standalone" class="md-nav__link">
    Arduino IDE builtin libraries are now excluded from the build when running arduino-cli standalone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-changes-in-message-ccarduinoclicommandsv1platformreference" class="md-nav__link">
    gRPC: Changes in message cc.arduino.cli.commands.v1.PlatformReference
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#golang-api-githubcomarduinoarduino-clicliglobalsdefaultindexurl-has-been-moved-under-githubcomarduinoarduino-cliarduinoglobals" class="md-nav__link">
    golang API: github.com/arduino/arduino-cli/cli/globals.DefaultIndexURL has been moved under github.com/arduino/arduino-cli/arduino/globals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#golang-api-packagemanagerdownloadplatformrelease-no-longer-need-label-parameter" class="md-nav__link">
    golang API: PackageManager.DownloadPlatformRelease no longer need label parameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0220" class="md-nav__link">
    0.22.0
  </a>
  
    <nav class="md-nav" aria-label="0.22.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinomultipleboardsdetectederror-field-changed-type" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino.MultipleBoardsDetectedError field changed type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-githubcomarduinoarduino-clicommandsuploaddetectconnectedboard-has-been-removed" class="md-nav__link">
    Function github.com/arduino/arduino-cli/commands/upload.DetectConnectedBoard(...) has been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-argumentsgetdiscoveryport-has-been-removed" class="md-nav__link">
    Function arguments.GetDiscoveryPort(...) has been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-address-parameter-has-been-removed-from-commandssupporteduserfieldsrequest" class="md-nav__link">
    gRPC: address parameter has been removed from commands.SupportedUserFieldsRequest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-content-of-package-githubcomarduinoarduino-clihttpclient-has-been-moved-to-a-different-path" class="md-nav__link">
    The content of package github.com/arduino/arduino-cli/httpclient has been moved to a different path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsdownloadprogresscb-and-commandstaskprogresscb-have-been-moved-to-package-githubcomarduinoarduino-clirpcccarduinoclicommandsv1" class="md-nav__link">
    commands.DownloadProgressCB and commands.TaskProgressCB have been moved to package github.com/arduino/arduino-cli/rpc/cc/arduino/cli/commands/v1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsgetdownloaderconfig-has-been-moved-to-package-githubcomarduinoarduino-cliarduinohttpclient" class="md-nav__link">
    commands.GetDownloaderConfig has been moved to package github.com/arduino/arduino-cli/arduino/httpclient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsdownload-has-been-removed-and-replaced-by-githubcomarduinoarduino-cliarduinohttpclientdownloadfile" class="md-nav__link">
    commands.Download has been removed and replaced by github.com/arduino/arduino-cli/arduino/httpclient.DownloadFile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packagemanagerpackagemanagerdownloadtoolrelease-packagemanagerpackagemanagerdownloadplatformrelease-and-resourcesdownloadresourcedownload-functions-change-signature-and-behaviour" class="md-nav__link">
    packagemanager.PackageManager.DownloadToolRelease, packagemanager.PackageManager.DownloadPlatformRelease, and resources.DownloadResource.Download functions change signature and behaviour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packagemanagerload-functions-now-returns-error-instead-of-statusstatus" class="md-nav__link">
    packagemanager.Load* functions now returns error instead of *status.Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-error-return-from-discoverynew-function" class="md-nav__link">
    Removed error return from discovery.New(...) function
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0210" class="md-nav__link">
    0.21.0
  </a>
  
    <nav class="md-nav" aria-label="0.21.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packagemanagernewpackagemanager-function-change" class="md-nav__link">
    packagemanager.NewPackageManager function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandscreate-function-change" class="md-nav__link">
    commands.Create function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandscompile-function-change" class="md-nav__link">
    commands.Compile function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicliargumentsparsereferences-function-change" class="md-nav__link">
    github.com/arduino/arduino-cli/cli/arguments.ParseReferences function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicliargumentsparsereference-function-change" class="md-nav__link">
    github.com/arduino/arduino-cli/cli/arguments.ParseReference function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliexecutilsnewprocess-and-executilsnewprocessfrompath-function-change" class="md-nav__link">
    github.com/arduino/arduino-cli/executils.NewProcess and executils.NewProcessFromPath function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clii18ninit-now-requires-an-empty-string-to-be-passed-for-autodetection-of-locale" class="md-nav__link">
    github.com/arduino/arduino-cli/i18n.Init(...) now requires an empty string to be passed for autodetection of locale
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clilegacyi18n-module-has-been-removed-in-particular-the-i18nlogger" class="md-nav__link">
    github.com/arduino/arduino-cli/legacy/i18n module has been removed (in particular the i18n.Logger)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0200" class="md-nav__link">
    0.20.0
  </a>
  
    <nav class="md-nav" aria-label="0.20.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-details-arguments-change" class="md-nav__link">
    board details arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#board-attach-arguments-change" class="md-nav__link">
    board attach arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout" class="md-nav__link">
    --timeout flag in board list command has been replaced by --discovery-timeout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0190" class="md-nav__link">
    0.19.0
  </a>
  
    <nav class="md-nav" aria-label="0.19.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-list-command-json-output-change" class="md-nav__link">
    board list command JSON output change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes" class="md-nav__link">
    gRPC interface DebugConfigRequest, UploadRequest, UploadUsingProgrammerRequest, BurnBootloaderRequest, DetectedPort field changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-boardlistitem-change" class="md-nav__link">
    gRPC interface BoardListItem change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-public-library-interface" class="md-nav__link">
    Change public library interface
  </a>
  
    <nav class="md-nav" aria-label="Change public library interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clii18n-package" class="md-nav__link">
    github.com/arduino/arduino-cli/i18n package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinobuilder-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/builder package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketch-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketch package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketches-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketches package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clilegacybuildertypes-package" class="md-nav__link">
    github.com/arduino/arduino-cli/legacy/builder/types package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-in-board-details-response-grpc-and-json-output" class="md-nav__link">
    Change in board details response (gRPC and JSON output)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-init-function" class="md-nav__link">
    Change of behaviour of gRPC Init function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removal-of-grpc-rescan-function" class="md-nav__link">
    Removal of gRPC Rescan function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions" class="md-nav__link">
    Change of behaviour of gRPC UpdateIndex and UpdateLibrariesIndex functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-rarely-used-golang-api" class="md-nav__link">
    Removed rarely used golang API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0180" class="md-nav__link">
    0.18.0
  </a>
  
    <nav class="md-nav" aria-label="0.18.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-grpc-api-and-cli-json-output" class="md-nav__link">
    Breaking changes in gRPC API and CLI JSON output.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-api-breaking-changes" class="md-nav__link">
    gRPC API breaking changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-cli-json-output-breaking-changes" class="md-nav__link">
    arduino-cli JSON output breaking changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0160" class="md-nav__link">
    0.16.0
  </a>
  
    <nav class="md-nav" aria-label="0.16.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-type-of-compilereqexportbinaries-message-in-grpc-interface" class="md-nav__link">
    Change type of CompileReq.ExportBinaries message in gRPC interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0150" class="md-nav__link">
    0.15.0
  </a>
  
    <nav class="md-nav" aria-label="0.15.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rename-telemetry-settings-to-metrics" class="md-nav__link">
    Rename telemetry settings to metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0140" class="md-nav__link">
    0.14.0
  </a>
  
    <nav class="md-nav" aria-label="0.14.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-in-debug-command" class="md-nav__link">
    Changes in debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binaries-export-must-now-be-explicitly-specified" class="md-nav__link">
    Binaries export must now be explicitly specified
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmers-cant-be-listed-anymore-using-burn-bootloader-p-list" class="md-nav__link">
    Programmers can't be listed anymore using burn-bootloader -P list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled" class="md-nav__link">
    lib install --git-url and --zip-file must now be explicitly enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-behaviour-of-config-file-flag-with-config-commands" class="md-nav__link">
    Change behaviour of --config-file flag with config commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../command-line-completion/" class="md-nav__link">
        Command line completion
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING/" class="md-nav__link">
        How to contribute
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Command reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Command reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli/" class="md-nav__link">
        arduino-cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board/" class="md-nav__link">
        board
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_attach/" class="md-nav__link">
        board attach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_details/" class="md-nav__link">
        board details
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_list/" class="md-nav__link">
        board list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_listall/" class="md-nav__link">
        board listall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_search/" class="md-nav__link">
        board search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_burn-bootloader/" class="md-nav__link">
        burn-bootloader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_cache/" class="md-nav__link">
        cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_cache_clean/" class="md-nav__link">
        cache clean
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_compile/" class="md-nav__link">
        compile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_completion/" class="md-nav__link">
        completion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_dump/" class="md-nav__link">
        config dump
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_init/" class="md-nav__link">
        config init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_add/" class="md-nav__link">
        config add
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_delete/" class="md-nav__link">
        config delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_remove/" class="md-nav__link">
        config remove
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_set/" class="md-nav__link">
        config set
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core/" class="md-nav__link">
        core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_download/" class="md-nav__link">
        core download
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_install/" class="md-nav__link">
        core install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_list/" class="md-nav__link">
        core list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_search/" class="md-nav__link">
        core search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_uninstall/" class="md-nav__link">
        core uninstall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_update-index/" class="md-nav__link">
        core update-index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_upgrade/" class="md-nav__link">
        core upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_daemon/" class="md-nav__link">
        daemon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_debug/" class="md-nav__link">
        debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib/" class="md-nav__link">
        lib
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_deps/" class="md-nav__link">
        lib deps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_download/" class="md-nav__link">
        lib download
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_examples/" class="md-nav__link">
        lib examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_install/" class="md-nav__link">
        lib install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_list/" class="md-nav__link">
        lib list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_search/" class="md-nav__link">
        lib search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_uninstall/" class="md-nav__link">
        lib uninstall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_update-index/" class="md-nav__link">
        lib update-index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_upgrade/" class="md-nav__link">
        lib upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_monitor/" class="md-nav__link">
        monitor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_outdated/" class="md-nav__link">
        outdated
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_sketch/" class="md-nav__link">
        sketch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_sketch_archive/" class="md-nav__link">
        sketch archive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_sketch_new/" class="md-nav__link">
        sketch new
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_update/" class="md-nav__link">
        update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_upgrade/" class="md-nav__link">
        upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_upload/" class="md-nav__link">
        upload
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          gRPC reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="gRPC reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          gRPC reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpc/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpc/settings/" class="md-nav__link">
        settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpc/debug/" class="md-nav__link">
        debug
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../integration-options/" class="md-nav__link">
        Integration options
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sketch-build-process/" class="md-nav__link">
        Sketch build process
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sketch-specification/" class="md-nav__link">
        Sketch specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sketch-project-file/" class="md-nav__link">
        Sketch project file
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../library-specification/" class="md-nav__link">
        Library specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../platform-specification/" class="md-nav__link">
        Platform specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pluggable-discovery-specification/" class="md-nav__link">
        Pluggable discovery specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pluggable-monitor-specification/" class="md-nav__link">
        Pluggable monitor specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../package_index_json-specification/" class="md-nav__link">
        Package index specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_20" type="checkbox" id="__nav_20" >
      
      
      
      
        <label class="md-nav__link" for="__nav_20">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_20">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/secure-boot/" class="md-nav__link">
        Secure boot
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0280" class="md-nav__link">
    0.28.0
  </a>
  
    <nav class="md-nav" aria-label="0.28.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-libraries-name-handling" class="md-nav__link">
    Breaking changes in libraries name handling
  </a>
  
    <nav class="md-nav" aria-label="Breaking changes in libraries name handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grpc-message-ccarduinoclicommandsv1library-no-longer-has-real_name-field" class="md-nav__link">
    gRPC message cc.arduino.cli.commands.v1.Library no longer has real_name field
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-readable-lib-list-output-no-longer-has-real-name-field" class="md-nav__link">
    Machine readable lib list output no longer has "real name" field
  </a>
  
    <nav class="md-nav" aria-label="Machine readable lib list output no longer has "real name" field">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    JSON
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaml" class="md-nav__link">
    YAML
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerinstall-removed-parameter-installlocation" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibrariesManager.Install removed parameter installLocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerfindbyreference-now-returns-a-list-of-libraries" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibrariesManager.FindByReference now returns a list of libraries.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibraryalternatives-removed" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibraryAlternatives removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-updateindex-api-both-grpc-and-go-lang" class="md-nav__link">
    Breaking changes in UpdateIndex API (both gRPC and go-lang)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0270" class="md-nav__link">
    0.27.0
  </a>
  
    <nav class="md-nav" aria-label="0.27.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-golang-api-githubcomarduinoarduino-cliarduinocorespackagemanagerpackagemanager" class="md-nav__link">
    Breaking changes in golang API github.com/arduino/arduino-cli/arduino/cores/packagemanager.PackageManager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#some-grpc-mapped-methods-now-accepts-the-grpc-request-instead-of-the-instance-id-as-parameter" class="md-nav__link">
    Some gRPC-mapped methods now accepts the gRPC request instead of the instance ID as parameter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-detection-of-arduino-ide-bundling" class="md-nav__link">
    Removed detection of Arduino IDE bundling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-enumeration-renamed-enum-value-in-ccarduinoclicommandsv1librarylocation" class="md-nav__link">
    gRPC enumeration renamed enum value in cc.arduino.cli.commands.v1.LibraryLocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-lang-api-change-in-librarymanager" class="md-nav__link">
    go-lang API change in LibraryManager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go-lang-functions-changes-in-githubcomarduinoarduino-cliconfiguration" class="md-nav__link">
    go-lang functions changes in github.com/arduino/arduino-cli/configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-utilsfeedstreamto-and-utilsconsumestreamfrom" class="md-nav__link">
    Removed utils.FeedStreamTo and utils.ConsumeStreamFrom
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0260" class="md-nav__link">
    0.26.0
  </a>
  
    <nav class="md-nav" aria-label="0.26.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicommandsdownloadtoolrelease-and-installtoolrelease-functions-have-been-removed" class="md-nav__link">
    github.com/arduino/arduino-cli/commands.DownloadToolRelease, and InstallToolRelease functions have been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicommandsoutdated-and-upgrade-functions-have-been-moved" class="md-nav__link">
    github.com/arduino/arduino-cli/commands.Outdated and Upgrade functions have been moved
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduino-cliarduinocorespackagemanagerpackagemanager-methods-and-fields-change" class="md-nav__link">
    github.com/arduino-cli/arduino/cores/packagemanager.PackageManager methods and fields change
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0250" class="md-nav__link">
    0.25.0
  </a>
  
    <nav class="md-nav" aria-label="0.25.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go-lang-function-githubcomarduinoarduino-cliarduinoutilsfeedstreamto-has-been-changed" class="md-nav__link">
    go-lang function github.com/arduino/arduino-cli/arduino/utils.FeedStreamTo has been changed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0240" class="md-nav__link">
    0.24.0
  </a>
  
    <nav class="md-nav" aria-label="0.24.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grpc-monitor-service-and-related-grpc-calls-have-been-removed" class="md-nav__link">
    gRPC Monitor service and related gRPC calls have been removed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0230" class="md-nav__link">
    0.23.0
  </a>
  
    <nav class="md-nav" aria-label="0.23.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arduino-ide-builtin-libraries-are-now-excluded-from-the-build-when-running-arduino-cli-standalone" class="md-nav__link">
    Arduino IDE builtin libraries are now excluded from the build when running arduino-cli standalone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-changes-in-message-ccarduinoclicommandsv1platformreference" class="md-nav__link">
    gRPC: Changes in message cc.arduino.cli.commands.v1.PlatformReference
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#golang-api-githubcomarduinoarduino-clicliglobalsdefaultindexurl-has-been-moved-under-githubcomarduinoarduino-cliarduinoglobals" class="md-nav__link">
    golang API: github.com/arduino/arduino-cli/cli/globals.DefaultIndexURL has been moved under github.com/arduino/arduino-cli/arduino/globals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#golang-api-packagemanagerdownloadplatformrelease-no-longer-need-label-parameter" class="md-nav__link">
    golang API: PackageManager.DownloadPlatformRelease no longer need label parameter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0220" class="md-nav__link">
    0.22.0
  </a>
  
    <nav class="md-nav" aria-label="0.22.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinomultipleboardsdetectederror-field-changed-type" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino.MultipleBoardsDetectedError field changed type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-githubcomarduinoarduino-clicommandsuploaddetectconnectedboard-has-been-removed" class="md-nav__link">
    Function github.com/arduino/arduino-cli/commands/upload.DetectConnectedBoard(...) has been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-argumentsgetdiscoveryport-has-been-removed" class="md-nav__link">
    Function arguments.GetDiscoveryPort(...) has been removed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-address-parameter-has-been-removed-from-commandssupporteduserfieldsrequest" class="md-nav__link">
    gRPC: address parameter has been removed from commands.SupportedUserFieldsRequest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-content-of-package-githubcomarduinoarduino-clihttpclient-has-been-moved-to-a-different-path" class="md-nav__link">
    The content of package github.com/arduino/arduino-cli/httpclient has been moved to a different path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsdownloadprogresscb-and-commandstaskprogresscb-have-been-moved-to-package-githubcomarduinoarduino-clirpcccarduinoclicommandsv1" class="md-nav__link">
    commands.DownloadProgressCB and commands.TaskProgressCB have been moved to package github.com/arduino/arduino-cli/rpc/cc/arduino/cli/commands/v1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsgetdownloaderconfig-has-been-moved-to-package-githubcomarduinoarduino-cliarduinohttpclient" class="md-nav__link">
    commands.GetDownloaderConfig has been moved to package github.com/arduino/arduino-cli/arduino/httpclient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsdownload-has-been-removed-and-replaced-by-githubcomarduinoarduino-cliarduinohttpclientdownloadfile" class="md-nav__link">
    commands.Download has been removed and replaced by github.com/arduino/arduino-cli/arduino/httpclient.DownloadFile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packagemanagerpackagemanagerdownloadtoolrelease-packagemanagerpackagemanagerdownloadplatformrelease-and-resourcesdownloadresourcedownload-functions-change-signature-and-behaviour" class="md-nav__link">
    packagemanager.PackageManager.DownloadToolRelease, packagemanager.PackageManager.DownloadPlatformRelease, and resources.DownloadResource.Download functions change signature and behaviour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packagemanagerload-functions-now-returns-error-instead-of-statusstatus" class="md-nav__link">
    packagemanager.Load* functions now returns error instead of *status.Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-error-return-from-discoverynew-function" class="md-nav__link">
    Removed error return from discovery.New(...) function
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0210" class="md-nav__link">
    0.21.0
  </a>
  
    <nav class="md-nav" aria-label="0.21.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packagemanagernewpackagemanager-function-change" class="md-nav__link">
    packagemanager.NewPackageManager function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandscreate-function-change" class="md-nav__link">
    commands.Create function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandscompile-function-change" class="md-nav__link">
    commands.Compile function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicliargumentsparsereferences-function-change" class="md-nav__link">
    github.com/arduino/arduino-cli/cli/arguments.ParseReferences function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clicliargumentsparsereference-function-change" class="md-nav__link">
    github.com/arduino/arduino-cli/cli/arguments.ParseReference function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliexecutilsnewprocess-and-executilsnewprocessfrompath-function-change" class="md-nav__link">
    github.com/arduino/arduino-cli/executils.NewProcess and executils.NewProcessFromPath function change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clii18ninit-now-requires-an-empty-string-to-be-passed-for-autodetection-of-locale" class="md-nav__link">
    github.com/arduino/arduino-cli/i18n.Init(...) now requires an empty string to be passed for autodetection of locale
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clilegacyi18n-module-has-been-removed-in-particular-the-i18nlogger" class="md-nav__link">
    github.com/arduino/arduino-cli/legacy/i18n module has been removed (in particular the i18n.Logger)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0200" class="md-nav__link">
    0.20.0
  </a>
  
    <nav class="md-nav" aria-label="0.20.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-details-arguments-change" class="md-nav__link">
    board details arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#board-attach-arguments-change" class="md-nav__link">
    board attach arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout" class="md-nav__link">
    --timeout flag in board list command has been replaced by --discovery-timeout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0190" class="md-nav__link">
    0.19.0
  </a>
  
    <nav class="md-nav" aria-label="0.19.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-list-command-json-output-change" class="md-nav__link">
    board list command JSON output change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes" class="md-nav__link">
    gRPC interface DebugConfigRequest, UploadRequest, UploadUsingProgrammerRequest, BurnBootloaderRequest, DetectedPort field changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-boardlistitem-change" class="md-nav__link">
    gRPC interface BoardListItem change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-public-library-interface" class="md-nav__link">
    Change public library interface
  </a>
  
    <nav class="md-nav" aria-label="Change public library interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clii18n-package" class="md-nav__link">
    github.com/arduino/arduino-cli/i18n package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinobuilder-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/builder package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketch-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketch package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketches-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketches package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clilegacybuildertypes-package" class="md-nav__link">
    github.com/arduino/arduino-cli/legacy/builder/types package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-in-board-details-response-grpc-and-json-output" class="md-nav__link">
    Change in board details response (gRPC and JSON output)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-init-function" class="md-nav__link">
    Change of behaviour of gRPC Init function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removal-of-grpc-rescan-function" class="md-nav__link">
    Removal of gRPC Rescan function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions" class="md-nav__link">
    Change of behaviour of gRPC UpdateIndex and UpdateLibrariesIndex functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-rarely-used-golang-api" class="md-nav__link">
    Removed rarely used golang API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0180" class="md-nav__link">
    0.18.0
  </a>
  
    <nav class="md-nav" aria-label="0.18.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-grpc-api-and-cli-json-output" class="md-nav__link">
    Breaking changes in gRPC API and CLI JSON output.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-api-breaking-changes" class="md-nav__link">
    gRPC API breaking changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-cli-json-output-breaking-changes" class="md-nav__link">
    arduino-cli JSON output breaking changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0160" class="md-nav__link">
    0.16.0
  </a>
  
    <nav class="md-nav" aria-label="0.16.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-type-of-compilereqexportbinaries-message-in-grpc-interface" class="md-nav__link">
    Change type of CompileReq.ExportBinaries message in gRPC interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0150" class="md-nav__link">
    0.15.0
  </a>
  
    <nav class="md-nav" aria-label="0.15.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rename-telemetry-settings-to-metrics" class="md-nav__link">
    Rename telemetry settings to metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0140" class="md-nav__link">
    0.14.0
  </a>
  
    <nav class="md-nav" aria-label="0.14.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-in-debug-command" class="md-nav__link">
    Changes in debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binaries-export-must-now-be-explicitly-specified" class="md-nav__link">
    Binaries export must now be explicitly specified
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmers-cant-be-listed-anymore-using-burn-bootloader-p-list" class="md-nav__link">
    Programmers can't be listed anymore using burn-bootloader -P list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled" class="md-nav__link">
    lib install --git-url and --zip-file must now be explicitly enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-behaviour-of-config-file-flag-with-config-commands" class="md-nav__link">
    Change behaviour of --config-file flag with config commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/arduino/arduino-cli/blob/master/docs/UPGRADING.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="upgrading">Upgrading<a class="headerlink" href="#upgrading" title="Permanent link">&para;</a></h1>
<p>Here you can find a list of migration guides to handle breaking changes between releases of the CLI.</p>
<h2 id="0280">0.28.0<a class="headerlink" href="#0280" title="Permanent link">&para;</a></h2>
<h3 id="breaking-changes-in-libraries-name-handling">Breaking changes in libraries name handling<a class="headerlink" href="#breaking-changes-in-libraries-name-handling" title="Permanent link">&para;</a></h3>
<p>In the structure <code>github.com/arduino/arduino-cli/arduino/libraries.Library</code> the field:</p>
<ul>
<li><code>RealName</code> has been renamed to <code>Name</code></li>
<li><code>Name</code> has been renamed to <code>DirName</code></li>
</ul>
<p>Now <code>Name</code> is the name of the library as it appears in the <code>library.properties</code> file and <code>DirName</code> it's the name of the
directory containing the library. The <code>DirName</code> is usually the name of the library with non-alphanumeric characters
converted to underscore, but it could be actually anything since the directory where the library is installed can be
freely renamed.</p>
<p>This change improves the overall code base naming coherence since all the structures involving libraries have the <code>Name</code>
field that refers to the library name as it appears in the <code>library.properties</code> file.</p>
<h4 id="grpc-message-ccarduinoclicommandsv1library-no-longer-has-real_name-field">gRPC message <code>cc.arduino.cli.commands.v1.Library</code> no longer has <code>real_name</code> field<a class="headerlink" href="#grpc-message-ccarduinoclicommandsv1library-no-longer-has-real_name-field" title="Permanent link">&para;</a></h4>
<p>You must use the <code>name</code> field instead.</p>
<h4 id="machine-readable-lib-list-output-no-longer-has-real-name-field">Machine readable <code>lib list</code> output no longer has "real name" field<a class="headerlink" href="#machine-readable-lib-list-output-no-longer-has-real-name-field" title="Permanent link">&para;</a></h4>
<h5 id="json">JSON<a class="headerlink" href="#json" title="Permanent link">&para;</a></h5>
<p>The <code>[*].library.real_name</code> field has been removed.</p>
<p>You must use the <code>[*].library.name</code> field instead.</p>
<h5 id="yaml">YAML<a class="headerlink" href="#yaml" title="Permanent link">&para;</a></h5>
<p>The <code>[*].library.realname</code> field has been removed.</p>
<p>You must use the <code>[*].library.name</code> field instead.</p>
<h3 id="githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerinstall-removed-parameter-installlocation"><code>github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibrariesManager.Install</code> removed parameter <code>installLocation</code><a class="headerlink" href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerinstall-removed-parameter-installlocation" title="Permanent link">&para;</a></h3>
<p>The method:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">Install</span><span class="p">(</span><span class="nx">indexLibrary</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Release</span><span class="p">,</span><span class="w"> </span><span class="nx">libPath</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>no more needs the <code>installLocation</code> parameter:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">Install</span><span class="p">(</span><span class="nx">indexLibrary</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Release</span><span class="p">,</span><span class="w"> </span><span class="nx">libPath</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The install location is determined from the libPath.</p>
<h3 id="githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerfindbyreference-now-returns-a-list-of-libraries"><code>github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibrariesManager.FindByReference</code> now returns a list of libraries.<a class="headerlink" href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibrariesmanagerfindbyreference-now-returns-a-list-of-libraries" title="Permanent link">&para;</a></h3>
<p>The method:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">FindByReference</span><span class="p">(</span><span class="nx">libRef</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Reference</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">libraries</span><span class="p">.</span><span class="nx">Library</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>has been changed to:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">FindByReference</span><span class="p">(</span><span class="nx">libRef</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Reference</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">List</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>the method now returns all the libraries matching the criteria and not just the first one.</p>
<h3 id="githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibraryalternatives-removed"><code>github.com/arduino/arduino-cli/arduino/libraries/librariesmanager.LibraryAlternatives</code> removed<a class="headerlink" href="#githubcomarduinoarduino-cliarduinolibrarieslibrariesmanagerlibraryalternatives-removed" title="Permanent link">&para;</a></h3>
<p>The structure <code>librariesmanager.LibraryAlternatives</code> has been removed. The <code>libraries.List</code> object can be used as a
replacement.</p>
<h3 id="breaking-changes-in-updateindex-api-both-grpc-and-go-lang">Breaking changes in UpdateIndex API (both gRPC and go-lang)<a class="headerlink" href="#breaking-changes-in-updateindex-api-both-grpc-and-go-lang" title="Permanent link">&para;</a></h3>
<p>The gRPC message <code>cc.arduino.cli.commands.v1.DownloadProgress</code> has been changed from:</p>
<div class="highlight"><pre><span></span><code>message DownloadProgress {
  // URL of the download.
  string url = 1;
  // The file being downloaded.
  string file = 2;
  // Total size of the file being downloaded.
  int64 total_size = 3;
  // Size of the downloaded portion of the file.
  int64 downloaded = 4;
  // Whether the download is complete.
  bool completed = 5;
}
</code></pre></div>
<p>to</p>
<div class="highlight"><pre><span></span><code>message DownloadProgress {
  oneof message {
    DownloadProgressStart start = 1;
    DownloadProgressUpdate update = 2;
    DownloadProgressEnd end = 3;
  }
}

message DownloadProgressStart {
  // URL of the download.
  string url = 1;
  // The label to display on the progress bar.
  string label = 2;
}

message DownloadProgressUpdate {
  // Size of the downloaded portion of the file.
  int64 downloaded = 1;
  // Total size of the file being downloaded.
  int64 total_size = 2;
}

message DownloadProgressEnd {
  // True if the download is successful
  bool success = 1;
  // Info or error message, depending on the value of &#39;success&#39;. Some examples:
  // &quot;File xxx already downloaded&quot; or &quot;Connection timeout&quot;
  string message = 2;
}
</code></pre></div>
<p>The new message format allows a better handling of the progress update reports on downloads. Every download now will
report a sequence of message as follows:</p>
<div class="highlight"><pre><span></span><code>DownloadProgressStart{url=&quot;https://...&quot;, label=&quot;Downloading package index...&quot;}
DownloadProgressUpdate{downloaded=0, total_size=103928}
DownloadProgressUpdate{downloaded=29380, total_size=103928}
DownloadProgressUpdate{downloaded=69540, total_size=103928}
DownloadProgressEnd{success=true, message=&quot;&quot;}
</code></pre></div>
<p>or if an error occurs:</p>
<div class="highlight"><pre><span></span><code>DownloadProgressStart{url=&quot;https://...&quot;, label=&quot;Downloading package index...&quot;}
DownloadProgressUpdate{downloaded=0, total_size=103928}
DownloadProgressEnd{success=false, message=&quot;Server closed connection&quot;}
</code></pre></div>
<p>or if the file is already cached:</p>
<div class="highlight"><pre><span></span><code>DownloadProgressStart{url=&quot;https://...&quot;, label=&quot;Downloading package index...&quot;}
DownloadProgressEnd{success=true, message=&quot;Index already downloaded&quot;}
</code></pre></div>
<p>About the go-lang API the following functions in <code>github.com/arduino/arduino-cli/commands</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">UpdateIndex</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">UpdateIndexRequest</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">UpdateIndexResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>have changed their signature to:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">UpdateIndex</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">UpdateIndexRequest</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadResultCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadResultCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><code>UpdateIndex</code> do not return anymore the latest <code>UpdateIndexResponse</code> (beacuse it was always empty).</p>
<h2 id="0270">0.27.0<a class="headerlink" href="#0270" title="Permanent link">&para;</a></h2>
<h3 id="breaking-changes-in-golang-api-githubcomarduinoarduino-cliarduinocorespackagemanagerpackagemanager">Breaking changes in golang API <code>github.com/arduino/arduino-cli/arduino/cores/packagemanager.PackageManager</code><a class="headerlink" href="#breaking-changes-in-golang-api-githubcomarduinoarduino-cliarduinocorespackagemanagerpackagemanager" title="Permanent link">&para;</a></h3>
<p>The <code>PackageManager</code> API has been heavily refactored to correctly handle multitasking and concurrency. Many fields in
the PackageManager object are now private. All the <code>PackageManager</code> methods have been moved into other objects. In
particular:</p>
<ul>
<li>the methods that query the <code>PackageManager</code> without changing its internal state, have been moved into the new
  <code>Explorer</code> object</li>
<li>the methods that change the <code>PackageManager</code> internal state, have been moved into the new <code>Builder</code> object.</li>
</ul>
<p>The <code>Builder</code> object must be used to create a new <code>PackageManager</code>. Previously the function <code>NewPackageManager</code> was used
to get a clean <code>PackageManager</code> object and then use the <code>LoadHardware*</code> methods to build it. Now the function
<code>NewBuilder</code> must be used to create a <code>Builder</code>, run the <code>LoadHardware*</code> methods to load platforms, and finally call the
<code>Builder.Build()</code> method to obtain the final <code>PackageManager</code>.</p>
<p>Previously we did:</p>
<div class="highlight"><pre><span></span><code><span class="nx">pm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">NewPackageManager</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadHardware</span><span class="p">()</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadHardwareFromDirectories</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadHardwareFromDirectory</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadToolsFromPackageDir</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadToolsFromBundleDirectories</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadToolsFromBundleDirectory</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">pack</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">GetOrCreatePackage</span><span class="p">(</span><span class="s">&quot;packagername&quot;</span><span class="p">)</span><span class="w"></span>
<span class="c1">// ...use `pack` to tweak or load more hardware...</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadPackageIndex</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadPackageIndexFromFile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadHardwareForProfile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>

<span class="c1">// ...use `pm` to implement business logic...</span><span class="w"></span>
</code></pre></div>
<p>Now we must do:</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="w"></span>

<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">pmb</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">Newbuilder</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadHardware</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadHardwareFromDirectories</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadHardwareFromDirectory</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadToolsFromPackageDir</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadToolsFromBundleDirectories</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadToolsFromBundleDirectory</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">pack</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">GetOrCreatePackage</span><span class="p">(</span><span class="s">&quot;packagername&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...use `pack` to tweak or load more hardware...</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadPackageIndex</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadPackageIndexFromFile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadHardwareForProfile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">pm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">Build</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// ...use `pm` to implement business logic...</span><span class="w"></span>
</code></pre></div>
<p>It's not mandatory but highly recommended, to drop the <code>Builder</code> object once it has built the <code>PackageManager</code> (that's
why in the example the <code>pmb</code> builder is created in a limited scope between braces).</p>
<p>To query the <code>PackagerManager</code> now it is required to obtain an <code>Explorer</code> object through the
<code>PackageManager.NewExplorer()</code> method.</p>
<p>Previously we did:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">DoStuff</span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...implement business logic through PackageManager methods...</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">Packages</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">CustomGlobalProperties</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindPlatform</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindPlatformReleaseDependencies</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">DownloadToolRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">IdentifyBoard</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">DownloadAndInstallPlatformUpgrades</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">DownloadAndInstallPlatformAndTools</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">InstallPlatform</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">InstallPlatformInDirectory</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">RunPostInstallScript</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">IsManagedPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">UninstallPlatform</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">InstallTool</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">IsManagedToolRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">UninstallTool</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">IsToolRequired</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadDiscoveries</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">GetProfile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">GetEnvVarsForSpawnedProcess</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">DiscoveryManager</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindPlatformReleaseProvidingBoardsWithVidPid</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindBoardsWithVidPid</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindBoardsWithID</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindBoardWithFQBN</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">ResolveFQBN</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">Package</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">GetInstalledPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">GetAllInstalledToolsReleases</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">InstalledPlatformReleases</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">InstalledBoards</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindToolsRequiredFromPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">GetTool</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindToolsRequiredForBoard</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindToolDependency</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindDiscoveryDependency</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">FindMonitorDependency</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Now we must obtain the <code>Explorer</code> object to access the same methods, moreover, we must call the <code>release</code> callback
function once we complete the task:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">DoStuff</span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">pme</span><span class="p">,</span><span class="w"> </span><span class="nx">release</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">NewExplorer</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">release</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">GetPackages</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">GetCustomGlobalProperties</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindPlatform</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindPlatformReleaseDependencies</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">DownloadToolRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">IdentifyBoard</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">DownloadAndInstallPlatformUpgrades</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">DownloadAndInstallPlatformAndTools</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">InstallPlatform</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">InstallPlatformInDirectory</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">RunPostInstallScript</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">IsManagedPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">UninstallPlatform</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">InstallTool</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">IsManagedToolRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">UninstallTool</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">IsToolRequired</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">LoadDiscoveries</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">GetProfile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">GetEnvVarsForSpawnedProcess</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">DiscoveryManager</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindPlatformReleaseProvidingBoardsWithVidPid</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindBoardsWithVidPid</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindBoardsWithID</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindBoardWithFQBN</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">ResolveFQBN</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">Package</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">GetInstalledPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">GetAllInstalledToolsReleases</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">InstalledPlatformReleases</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">InstalledBoards</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindToolsRequiredFromPlatformRelease</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">GetTool</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindToolsRequiredForBoard</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindToolDependency</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindDiscoveryDependency</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pme</span><span class="p">.</span><span class="nx">FindMonitorDependency</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The <code>Explorer</code> object keeps a read-lock on the underlying <code>PackageManager</code> that must be released once the task is done
by calling the <code>release</code> callback function. This ensures that no other task will change the status of the
<code>PackageManager</code> while the current task is in progress.</p>
<p>The <code>PackageManager.Clean()</code> method has been removed and replaced by the methods:</p>
<ul>
<li><code>PackageManager.NewBuilder() (*Builder, commit func())</code></li>
<li><code>Builder.BuildIntoExistingPackageManager(target *PackageManager)</code></li>
</ul>
<p>Previously, to update a <code>PackageManager</code> instance we did:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">Reload</span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">pm</span><span class="p">.</span><span class="nx">Clear</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">LoadHardware</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...other pm.Load* calls...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>now we have two options:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">Reload</span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Create a new builder and build a package manager</span><span class="w"></span>
<span class="w">    </span><span class="nx">pmb</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">NewBuilder</span><span class="p">(</span><span class="o">...</span><span class="cm">/* config params */</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadHardware</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...other pmb.Load* calls...</span><span class="w"></span>

<span class="w">    </span><span class="c1">// apply the changes to the original pm</span><span class="w"></span>
<span class="w">    </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">BuildIntoExistingPackageManager</span><span class="p">(</span><span class="nx">pm</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>in this case, we create a new <code>Builder</code> with the given config params and once the package manager is built we apply the
changes atomically with <code>BuildIntoExistingPackageManager</code>. This procedure may be even more simplified with:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">Reload</span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Create a new builder using the same config params</span><span class="w"></span>
<span class="w">    </span><span class="c1">// as the original package manager</span><span class="w"></span>
<span class="w">    </span><span class="nx">pmb</span><span class="p">,</span><span class="w"> </span><span class="nx">commit</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">NewBuilder</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="c1">// build the new package manager</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">pmb</span><span class="p">.</span><span class="nx">LoadHardware</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...other pmb.Load* calls...</span><span class="w"></span>

<span class="w">    </span><span class="c1">// apply the changes to the original pm</span><span class="w"></span>
<span class="w">    </span><span class="nx">commit</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>In this case, we don't even need to bother to provide the configuration parameters because they are taken from the
previous <code>PackageManager</code> instance.</p>
<h3 id="some-grpc-mapped-methods-now-accepts-the-grpc-request-instead-of-the-instance-id-as-parameter">Some gRPC-mapped methods now accepts the gRPC request instead of the instance ID as parameter<a class="headerlink" href="#some-grpc-mapped-methods-now-accepts-the-grpc-request-instead-of-the-instance-id-as-parameter" title="Permanent link">&para;</a></h3>
<p>The following methods in subpackages of <code>github.com/arduino/arduino-cli/commands/*</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">Watch</span><span class="p">(</span><span class="nx">instanceID</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="kd">chan</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">BoardListWatchResponse</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(),</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">LibraryUpgradeAll</span><span class="p">(</span><span class="nx">instanceID</span><span class="w"> </span><span class="kt">int32</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">,</span><span class="w"> </span><span class="nx">taskCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">LibraryUpgrade</span><span class="p">(</span><span class="nx">instanceID</span><span class="w"> </span><span class="kt">int32</span><span class="p">,</span><span class="w"> </span><span class="nx">libraryNames</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">,</span><span class="w"> </span><span class="nx">taskCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>have been changed to:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">Watch</span><span class="p">(</span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">BoardListWatchRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;-</span><span class="kd">chan</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">BoardListWatchResponse</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(),</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">LibraryUpgradeAll</span><span class="p">(</span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">LibraryUpgradeAllRequest</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">,</span><span class="w"> </span><span class="nx">taskCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">LibraryUpgrade</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">LibraryUpgradeRequest</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">,</span><span class="w"> </span><span class="nx">taskCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The following methods in package <code>github.com/arduino/arduino-cli/commands</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">GetInstance</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">CoreInstance</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">GetPackageManager</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">GetLibraryManager</span><span class="p">(</span><span class="nx">instanceID</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesmanager</span><span class="p">.</span><span class="nx">LibrariesManager</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>have been changed to:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">GetPackageManager</span><span class="p">(</span><span class="nx">instance</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">InstanceCommand</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">PackageManager</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// Deprecated</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">GetPackageManagerExplorer</span><span class="p">(</span><span class="nx">req</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">InstanceCommand</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">explorer</span><span class="w"> </span><span class="o">*</span><span class="nx">packagemanager</span><span class="p">.</span><span class="nx">Explorer</span><span class="p">,</span><span class="w"> </span><span class="nx">release</span><span class="w"> </span><span class="kd">func</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="nx">GetLibraryManager</span><span class="p">(</span><span class="nx">req</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">InstanceCommand</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesmanager</span><span class="p">.</span><span class="nx">LibrariesManager</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Old code passing the <code>instanceID</code> inside the gRPC request must be changed to pass directly the whole gRPC request, for
example:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nx">eventsChan</span><span class="p">,</span><span class="w"> </span><span class="nx">closeWatcher</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">board</span><span class="p">.</span><span class="nx">Watch</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">Instance</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>must be changed to:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nx">eventsChan</span><span class="p">,</span><span class="w"> </span><span class="nx">closeWatcher</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">board</span><span class="p">.</span><span class="nx">Watch</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="removed-detection-of-arduino-ide-bundling">Removed detection of Arduino IDE bundling<a class="headerlink" href="#removed-detection-of-arduino-ide-bundling" title="Permanent link">&para;</a></h3>
<p>Arduino CLI does not check anymore if it's bundled with the Arduino IDE 1.x. Previously this check allowed the Arduino
CLI to automatically use the libraries and tools bundled in the Arduino IDE, now this is not supported anymore unless
the configuration keys <code>directories.builtin.libraries</code> and <code>directories.builtin.tools</code> are set.</p>
<h3 id="grpc-enumeration-renamed-enum-value-in-ccarduinoclicommandsv1librarylocation">gRPC enumeration renamed enum value in <code>cc.arduino.cli.commands.v1.LibraryLocation</code><a class="headerlink" href="#grpc-enumeration-renamed-enum-value-in-ccarduinoclicommandsv1librarylocation" title="Permanent link">&para;</a></h3>
<p><code>LIBRARY_LOCATION_IDE_BUILTIN</code> has been renamed to <code>LIBRARY_LOCATION_BUILTIN</code></p>
<h3 id="go-lang-api-change-in-librarymanager">go-lang API change in <code>LibraryManager</code><a class="headerlink" href="#go-lang-api-change-in-librarymanager" title="Permanent link">&para;</a></h3>
<p>The following methods:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">InstallPrerequisiteCheck</span><span class="p">(</span><span class="nx">indexLibrary</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Release</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">libraries</span><span class="p">.</span><span class="nx">Library</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">Install</span><span class="p">(</span><span class="nx">indexLibrary</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Release</span><span class="p">,</span><span class="w"> </span><span class="nx">libPath</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">alts</span><span class="w"> </span><span class="o">*</span><span class="nx">LibraryAlternatives</span><span class="p">)</span><span class="w"> </span><span class="nx">FindVersion</span><span class="p">(</span><span class="nx">version</span><span class="w"> </span><span class="o">*</span><span class="nx">semver</span><span class="p">.</span><span class="nx">Version</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">libraries</span><span class="p">.</span><span class="nx">Library</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">FindByReference</span><span class="p">(</span><span class="nx">libRef</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Reference</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">libraries</span><span class="p">.</span><span class="nx">Library</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>now requires a new parameter <code>LibraryLocation</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">InstallPrerequisiteCheck</span><span class="p">(</span><span class="nx">indexLibrary</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Release</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">libraries</span><span class="p">.</span><span class="nx">Library</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">Install</span><span class="p">(</span><span class="nx">indexLibrary</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Release</span><span class="p">,</span><span class="w"> </span><span class="nx">libPath</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">alts</span><span class="w"> </span><span class="o">*</span><span class="nx">LibraryAlternatives</span><span class="p">)</span><span class="w"> </span><span class="nx">FindVersion</span><span class="p">(</span><span class="nx">version</span><span class="w"> </span><span class="o">*</span><span class="nx">semver</span><span class="p">.</span><span class="nx">Version</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">libraries</span><span class="p">.</span><span class="nx">Library</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="o">+</span><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">FindByReference</span><span class="p">(</span><span class="nx">libRef</span><span class="w"> </span><span class="o">*</span><span class="nx">librariesindex</span><span class="p">.</span><span class="nx">Reference</span><span class="p">,</span><span class="w"> </span><span class="nx">installLocation</span><span class="w"> </span><span class="nx">libraries</span><span class="p">.</span><span class="nx">LibraryLocation</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">libraries</span><span class="p">.</span><span class="nx">Library</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>If you're not interested in specifying the <code>LibraryLocation</code> you can use <code>libraries.User</code> to refer to the user
directory.</p>
<h3 id="go-lang-functions-changes-in-githubcomarduinoarduino-cliconfiguration">go-lang functions changes in <code>github.com/arduino/arduino-cli/configuration</code><a class="headerlink" href="#go-lang-functions-changes-in-githubcomarduinoarduino-cliconfiguration" title="Permanent link">&para;</a></h3>
<ul>
<li><code>github.com/arduino/arduino-cli/configuration.IsBundledInDesktopIDE</code> function has been removed.</li>
<li><code>github.com/arduino/arduino-cli/configuration.BundleToolsDirectories</code> has been renamed to <code>BuiltinToolsDirectories</code></li>
<li><code>github.com/arduino/arduino-cli/configuration.IDEBundledLibrariesDir</code> has been renamed to <code>IDEBuiltinLibrariesDir</code></li>
</ul>
<h3 id="removed-utilsfeedstreamto-and-utilsconsumestreamfrom">Removed <code>utils.FeedStreamTo</code> and <code>utils.ConsumeStreamFrom</code><a class="headerlink" href="#removed-utilsfeedstreamto-and-utilsconsumestreamfrom" title="Permanent link">&para;</a></h3>
<p><code>github.com/arduino/arduino-cli/arduino/utils.FeedStreamTo</code> and
<code>github.com/arduino/arduino-cli/arduino/utils.ConsumeStreamFrom</code> are now private. They are mainly used internally for
gRPC stream handling and are not suitable to be public API.</p>
<h2 id="0260">0.26.0<a class="headerlink" href="#0260" title="Permanent link">&para;</a></h2>
<h3 id="githubcomarduinoarduino-clicommandsdownloadtoolrelease-and-installtoolrelease-functions-have-been-removed"><code>github.com/arduino/arduino-cli/commands.DownloadToolRelease</code>, and <code>InstallToolRelease</code> functions have been removed<a class="headerlink" href="#githubcomarduinoarduino-clicommandsdownloadtoolrelease-and-installtoolrelease-functions-have-been-removed" title="Permanent link">&para;</a></h3>
<p>This functionality was duplicated and already available via <code>PackageManager</code> methods.</p>
<h3 id="githubcomarduinoarduino-clicommandsoutdated-and-upgrade-functions-have-been-moved"><code>github.com/arduino/arduino-cli/commands.Outdated</code> and <code>Upgrade</code> functions have been moved<a class="headerlink" href="#githubcomarduinoarduino-clicommandsoutdated-and-upgrade-functions-have-been-moved" title="Permanent link">&para;</a></h3>
<ul>
<li><code>github.com/arduino/arduino-cli/commands.Outdated</code> is now <code>github.com/arduino/arduino-cli/commands/outdated.Outdated</code></li>
<li><code>github.com/arduino/arduino-cli/commands.Upgrade</code> is now <code>github.com/arduino/arduino-cli/commands/upgrade.Upgrade</code></li>
</ul>
<p>Old code must change the imports accordingly.</p>
<h3 id="githubcomarduino-cliarduinocorespackagemanagerpackagemanager-methods-and-fields-change"><code>github.com/arduino-cli/arduino/cores/packagemanager.PackageManager</code> methods and fields change<a class="headerlink" href="#githubcomarduino-cliarduinocorespackagemanagerpackagemanager-methods-and-fields-change" title="Permanent link">&para;</a></h3>
<ul>
<li>The <code>PackageManager.Log</code> and <code>TempDir</code> fields are now private.</li>
</ul>
<ul>
<li>
<p>The <code>PackageManager.DownloadToolRelease</code> method has no more the <code>label</code> parameter:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadToolRelease</span><span class="p">(</span><span class="nx">tool</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">progressCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>has been changed to:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadToolRelease</span><span class="p">(</span><span class="nx">tool</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">progressCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>Old code should remove the <code>label</code> parameter.</p>
</li>
</ul>
<ul>
<li>
<p>The <code>PackageManager.UninstallPlatform</code>, <code>PackageManager.InstallTool</code>, and <code>PackageManager.UninstallTool</code> methods now
  requires a <code>github.com/arduino/arduino-cli/rpc/cc/arduino/cli/commands/v1.TaskProgressCB</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">UninstallPlatform</span><span class="p">(</span><span class="nx">platformRelease</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">PlatformRelease</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">InstallTool</span><span class="p">(</span><span class="nx">toolRelease</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">UninstallTool</span><span class="p">(</span><span class="nx">toolRelease</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>have been changed to:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">UninstallPlatform</span><span class="p">(</span><span class="nx">platformRelease</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">PlatformRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">taskCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">InstallTool</span><span class="p">(</span><span class="nx">toolRelease</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">taskCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">UninstallTool</span><span class="p">(</span><span class="nx">toolRelease</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">taskCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>If you're not interested in getting the task events you can pass an empty callback function.</p>
</li>
</ul>
<h2 id="0250">0.25.0<a class="headerlink" href="#0250" title="Permanent link">&para;</a></h2>
<h3 id="go-lang-function-githubcomarduinoarduino-cliarduinoutilsfeedstreamto-has-been-changed">go-lang function <code>github.com/arduino/arduino-cli/arduino/utils.FeedStreamTo</code> has been changed<a class="headerlink" href="#go-lang-function-githubcomarduinoarduino-cliarduinoutilsfeedstreamto-has-been-changed" title="Permanent link">&para;</a></h3>
<p>The function <code>FeedStreamTo</code> has been changed from:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">FeedStreamTo</span><span class="p">(</span><span class="nx">writer</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">[]</span><span class="kt">byte</span><span class="p">))</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="w"></span>
</code></pre></div>
<p>to</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">FeedStreamTo</span><span class="p">(</span><span class="nx">writer</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">[]</span><span class="kt">byte</span><span class="p">))</span><span class="w"> </span><span class="p">(</span><span class="nx">io</span><span class="p">.</span><span class="nx">WriteCloser</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>The user must call the <code>Close</code> method on the returned <code>io.WriteClose</code> to correctly dispose the streaming channel. The
context <code>Done()</code> method may be used to wait for the internal subroutines to complete.</p>
<h2 id="0240">0.24.0<a class="headerlink" href="#0240" title="Permanent link">&para;</a></h2>
<h3 id="grpc-monitor-service-and-related-grpc-calls-have-been-removed">gRPC <code>Monitor</code> service and related gRPC calls have been removed<a class="headerlink" href="#grpc-monitor-service-and-related-grpc-calls-have-been-removed" title="Permanent link">&para;</a></h3>
<p>The gRPC <code>Monitor</code> service and the gRPC call <code>Monitor.StreamingOpen</code> have been removed in favor of the new Pluggable
Monitor API in the gRPC <code>Commands</code> service:</p>
<ul>
<li><code>Commands.Monitor</code>: open a monitor connection to a communication port.</li>
<li><code>Commands.EnumerateMonitorPortSettings</code>: enumerate the possible configurations parameters for a communication port.</li>
</ul>
<p>Please refer to the official documentation and the reference client implementation for details on how to use the new
API.</p>
<p><a href="https://arduino.github.io/arduino-cli/dev/rpc/commands/#monitorrequest">https://arduino.github.io/arduino-cli/dev/rpc/commands/#monitorrequest</a>
<a href="https://arduino.github.io/arduino-cli/dev/rpc/commands/#monitorresponse">https://arduino.github.io/arduino-cli/dev/rpc/commands/#monitorresponse</a>
<a href="https://arduino.github.io/arduino-cli/dev/rpc/commands/#enumeratemonitorportsettingsrequest">https://arduino.github.io/arduino-cli/dev/rpc/commands/#enumeratemonitorportsettingsrequest</a>
<a href="https://arduino.github.io/arduino-cli/dev/rpc/commands/#enumeratemonitorportsettingsresponse">https://arduino.github.io/arduino-cli/dev/rpc/commands/#enumeratemonitorportsettingsresponse</a></p>
<p><a href="https://github.com/arduino/arduino-cli/blob/master/commands/daemon/term_example/main.go">https://github.com/arduino/arduino-cli/blob/master/commands/daemon/term_example/main.go</a></p>
<h2 id="0230">0.23.0<a class="headerlink" href="#0230" title="Permanent link">&para;</a></h2>
<h3 id="arduino-ide-builtin-libraries-are-now-excluded-from-the-build-when-running-arduino-cli-standalone">Arduino IDE builtin libraries are now excluded from the build when running <code>arduino-cli</code> standalone<a class="headerlink" href="#arduino-ide-builtin-libraries-are-now-excluded-from-the-build-when-running-arduino-cli-standalone" title="Permanent link">&para;</a></h3>
<p>Previously the "builtin libraries" in the Arduino IDE 1.8.x were always included in the build process. This wasn't the
intended behaviour, <code>arduino-cli</code> should include them only if run as a daemon from the Arduino IDE. Now this is fixed,
but since it has been the default behaviour from a very long time we decided to report it here as a breaking change.</p>
<p>If a compilation fail for a missing bundled library, you can fix it just by installing the missing library from the
library manager as usual.</p>
<h3 id="grpc-changes-in-message-ccarduinoclicommandsv1platformreference">gRPC: Changes in message <code>cc.arduino.cli.commands.v1.PlatformReference</code><a class="headerlink" href="#grpc-changes-in-message-ccarduinoclicommandsv1platformreference" title="Permanent link">&para;</a></h3>
<p>The gRPC message structure <code>cc.arduino.cli.commands.v1.PlatformReference</code> has been renamed to
<code>cc.arduino.cli.commands.v1.InstalledPlatformReference</code>, and some new fields have been added:</p>
<ul>
<li><code>install_dir</code> is the installation directory of the platform</li>
<li><code>package_url</code> is the 3rd party platform URL of the platform</li>
</ul>
<p>It is currently used only in <code>cc.arduino.cli.commands.v1.CompileResponse</code>, so the field type has been changed as well.
Old gRPC clients must only update gRPC bindings. They can safely ignore the new fields if not needed.</p>
<h3 id="golang-api-githubcomarduinoarduino-clicliglobalsdefaultindexurl-has-been-moved-under-githubcomarduinoarduino-cliarduinoglobals">golang API: <code>github.com/arduino/arduino-cli/cli/globals.DefaultIndexURL</code> has been moved under <code>github.com/arduino/arduino-cli/arduino/globals</code><a class="headerlink" href="#golang-api-githubcomarduinoarduino-clicliglobalsdefaultindexurl-has-been-moved-under-githubcomarduinoarduino-cliarduinoglobals" title="Permanent link">&para;</a></h3>
<p>Legacy code should just update the import.</p>
<h3 id="golang-api-packagemanagerdownloadplatformrelease-no-longer-need-label-parameter">golang API: PackageManager.DownloadPlatformRelease no longer need <code>label</code> parameter<a class="headerlink" href="#golang-api-packagemanagerdownloadplatformrelease-no-longer-need-label-parameter" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="nx">platform</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">PlatformRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">progressCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>is now:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="nx">platform</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">PlatformRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">progressCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>Just remove the <code>label</code> parameter from legacy code.</p>
<h2 id="0220">0.22.0<a class="headerlink" href="#0220" title="Permanent link">&para;</a></h2>
<h3 id="githubcomarduinoarduino-cliarduinomultipleboardsdetectederror-field-changed-type"><code>github.com/arduino/arduino-cli/arduino.MultipleBoardsDetectedError</code> field changed type<a class="headerlink" href="#githubcomarduinoarduino-cliarduinomultipleboardsdetectederror-field-changed-type" title="Permanent link">&para;</a></h3>
<p>Now the <code>Port</code> field of the error is a <code>github.com/arduino/arduino-cli/rpc/cc/arduino/cli/commands/v1.Port</code>, usually
imported as <code>rpc.Port</code>. The old <code>discovery.Port</code> can be converted to the new one using the <code>.ToRPC()</code> method.</p>
<h3 id="function-githubcomarduinoarduino-clicommandsuploaddetectconnectedboard-has-been-removed">Function <code>github.com/arduino/arduino-cli/commands/upload.DetectConnectedBoard(...)</code> has been removed<a class="headerlink" href="#function-githubcomarduinoarduino-clicommandsuploaddetectconnectedboard-has-been-removed" title="Permanent link">&para;</a></h3>
<p>Use <code>github.com/arduino/arduino-cli/commands/board.List(...)</code> to detect boards.</p>
<h3 id="function-argumentsgetdiscoveryport-has-been-removed">Function <code>arguments.GetDiscoveryPort(...)</code> has been removed<a class="headerlink" href="#function-argumentsgetdiscoveryport-has-been-removed" title="Permanent link">&para;</a></h3>
<p>NOTE: the functions in the <code>arguments</code> package doesn't have much use outside of the <code>arduino-cli</code> so we are considering
to remove them from the public golang API making them <code>internal</code>.</p>
<p>The old function:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Port</span><span class="p">)</span><span class="w"> </span><span class="nx">GetDiscoveryPort</span><span class="p">(</span><span class="nx">instance</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">Instance</span><span class="p">,</span><span class="w"> </span><span class="nx">sk</span><span class="w"> </span><span class="o">*</span><span class="nx">sketch</span><span class="p">.</span><span class="nx">Sketch</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">discovery</span><span class="p">.</span><span class="nx">Port</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>is now replaced by the more powerful:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Port</span><span class="p">)</span><span class="w"> </span><span class="nx">DetectFQBN</span><span class="p">(</span><span class="nx">inst</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">Instance</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">Port</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">CalculateFQBNAndPort</span><span class="p">(</span><span class="nx">portArgs</span><span class="w"> </span><span class="o">*</span><span class="nx">Port</span><span class="p">,</span><span class="w"> </span><span class="nx">fqbnArg</span><span class="w"> </span><span class="o">*</span><span class="nx">Fqbn</span><span class="p">,</span><span class="w"> </span><span class="nx">instance</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">Instance</span><span class="p">,</span><span class="w"> </span><span class="nx">sk</span><span class="w"> </span><span class="o">*</span><span class="nx">sketch</span><span class="p">.</span><span class="nx">Sketch</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">Port</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="grpc-address-parameter-has-been-removed-from-commandssupporteduserfieldsrequest">gRPC: <code>address</code> parameter has been removed from <code>commands.SupportedUserFieldsRequest</code><a class="headerlink" href="#grpc-address-parameter-has-been-removed-from-commandssupporteduserfieldsrequest" title="Permanent link">&para;</a></h3>
<p>The parameter is no more needed. Lagacy code will continue to work without modification (the value of the parameter will
be just ignored).</p>
<h3 id="the-content-of-package-githubcomarduinoarduino-clihttpclient-has-been-moved-to-a-different-path">The content of package <code>github.com/arduino/arduino-cli/httpclient</code> has been moved to a different path<a class="headerlink" href="#the-content-of-package-githubcomarduinoarduino-clihttpclient-has-been-moved-to-a-different-path" title="Permanent link">&para;</a></h3>
<p>In particular:</p>
<ul>
<li><code>UserAgent</code> and <code>NetworkProxy</code> have been moved to <code>github.com/arduino/arduino-cli/configuration</code></li>
<li>the remainder of the package <code>github.com/arduino/arduino-cli/httpclient</code> has been moved to
  <code>github.com/arduino/arduino-cli/arduino/httpclient</code></li>
</ul>
<p>The old imports must be updated according to the list above.</p>
<h3 id="commandsdownloadprogresscb-and-commandstaskprogresscb-have-been-moved-to-package-githubcomarduinoarduino-clirpcccarduinoclicommandsv1"><code>commands.DownloadProgressCB</code> and <code>commands.TaskProgressCB</code> have been moved to package <code>github.com/arduino/arduino-cli/rpc/cc/arduino/cli/commands/v1</code><a class="headerlink" href="#commandsdownloadprogresscb-and-commandstaskprogresscb-have-been-moved-to-package-githubcomarduinoarduino-clirpcccarduinoclicommandsv1" title="Permanent link">&para;</a></h3>
<p>All references to these types must be updated with the new import.</p>
<h3 id="commandsgetdownloaderconfig-has-been-moved-to-package-githubcomarduinoarduino-cliarduinohttpclient"><code>commands.GetDownloaderConfig</code> has been moved to package <code>github.com/arduino/arduino-cli/arduino/httpclient</code><a class="headerlink" href="#commandsgetdownloaderconfig-has-been-moved-to-package-githubcomarduinoarduino-cliarduinohttpclient" title="Permanent link">&para;</a></h3>
<p>All references to this function must be updated with the new import.</p>
<h3 id="commandsdownload-has-been-removed-and-replaced-by-githubcomarduinoarduino-cliarduinohttpclientdownloadfile"><code>commands.Download</code> has been removed and replaced by <code>github.com/arduino/arduino-cli/arduino/httpclient.DownloadFile</code><a class="headerlink" href="#commandsdownload-has-been-removed-and-replaced-by-githubcomarduinoarduino-cliarduinohttpclientdownloadfile" title="Permanent link">&para;</a></h3>
<p>The old function must be replaced by the new one that is much more versatile.</p>
<h3 id="packagemanagerpackagemanagerdownloadtoolrelease-packagemanagerpackagemanagerdownloadplatformrelease-and-resourcesdownloadresourcedownload-functions-change-signature-and-behaviour"><code>packagemanager.PackageManager.DownloadToolRelease</code>, <code>packagemanager.PackageManager.DownloadPlatformRelease</code>, and <code>resources.DownloadResource.Download</code> functions change signature and behaviour<a class="headerlink" href="#packagemanagerpackagemanagerdownloadtoolrelease-packagemanagerpackagemanagerdownloadplatformrelease-and-resourcesdownloadresourcedownload-functions-change-signature-and-behaviour" title="Permanent link">&para;</a></h3>
<p>The following functions:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadToolRelease</span><span class="p">(</span><span class="nx">tool</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Downloader</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="nx">platform</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">PlatformRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Downloader</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">DownloadResource</span><span class="p">)</span><span class="w"> </span><span class="nx">Download</span><span class="p">(</span><span class="nx">downloadDir</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Downloader</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>now requires a label and a progress callback parameter, do not return the <code>Downloader</code> object anymore, and they
automatically handles the download internally:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadToolRelease</span><span class="p">(</span><span class="nx">tool</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">ToolRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">progressCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="nx">platform</span><span class="w"> </span><span class="o">*</span><span class="nx">cores</span><span class="p">.</span><span class="nx">PlatformRelease</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">progressCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">DownloadResource</span><span class="p">)</span><span class="w"> </span><span class="nx">Download</span><span class="p">(</span><span class="nx">downloadDir</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadCB</span><span class="w"> </span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgressCB</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"></span>
</code></pre></div>
<p>The new progress parameters must be added to legacy code, if progress reports are not needed an empty stub for <code>label</code>
and <code>progressCB</code> must be provided. There is no more need to execute the <code>downloader.Run()</code> or
<code>downloader.RunAndPoll(...)</code> method.</p>
<p>For example, the old legacy code like:</p>
<div class="highlight"><pre><span></span><code><span class="nx">downloader</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="nx">platformToDownload</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="p">)</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Run</span><span class="p">();</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>may be ported to the new version as:</p>
<div class="highlight"><pre><span></span><code><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pm</span><span class="p">.</span><span class="nx">DownloadPlatformRelease</span><span class="p">(</span><span class="nx">platformToDownload</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">progress</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">DownloadProgress</span><span class="p">)</span><span class="w"> </span><span class="p">{})</span><span class="w"></span>
</code></pre></div>
<h3 id="packagemanagerload-functions-now-returns-error-instead-of-statusstatus"><code>packagemanager.Load*</code> functions now returns <code>error</code> instead of <code>*status.Status</code><a class="headerlink" href="#packagemanagerload-functions-now-returns-error-instead-of-statusstatus" title="Permanent link">&para;</a></h3>
<p>The following functions signature:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadHardware</span><span class="p">()</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">status</span><span class="p">.</span><span class="nx">Status</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadHardwareFromDirectories</span><span class="p">(</span><span class="nx">hardwarePaths</span><span class="w"> </span><span class="nx">paths</span><span class="p">.</span><span class="nx">PathList</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">status</span><span class="p">.</span><span class="nx">Status</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadHardwareFromDirectory</span><span class="p">(</span><span class="nx">path</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">status</span><span class="p">.</span><span class="nx">Status</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadToolsFromBundleDirectories</span><span class="p">(</span><span class="nx">dirs</span><span class="w"> </span><span class="nx">paths</span><span class="p">.</span><span class="nx">PathList</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">status</span><span class="p">.</span><span class="nx">Status</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadDiscoveries</span><span class="p">()</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">status</span><span class="p">.</span><span class="nx">Status</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>have been changed to:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadHardware</span><span class="p">()</span><span class="w"> </span><span class="p">[]</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadHardwareFromDirectories</span><span class="p">(</span><span class="nx">hardwarePaths</span><span class="w"> </span><span class="nx">paths</span><span class="p">.</span><span class="nx">PathList</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadHardwareFromDirectory</span><span class="p">(</span><span class="nx">path</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadToolsFromBundleDirectories</span><span class="p">(</span><span class="nx">dirs</span><span class="w"> </span><span class="nx">paths</span><span class="p">.</span><span class="nx">PathList</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pm</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="p">)</span><span class="w"> </span><span class="nx">LoadDiscoveries</span><span class="p">()</span><span class="w"> </span><span class="p">[]</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>These function no longer returns a gRPC status, so the errors can be handled as any other <code>error</code>.</p>
<h3 id="removed-error-return-from-discoverynew-function">Removed <code>error</code> return from <code>discovery.New(...)</code> function<a class="headerlink" href="#removed-error-return-from-discoverynew-function" title="Permanent link">&para;</a></h3>
<p>The <code>discovery.New(...)</code> function never fails, so the error has been removed, the old signature:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">New</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">...</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">PluggableDiscovery</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>is now:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">New</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">...</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">PluggableDiscovery</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<h2 id="0210">0.21.0<a class="headerlink" href="#0210" title="Permanent link">&para;</a></h2>
<h3 id="packagemanagernewpackagemanager-function-change"><code>packagemanager.NewPackageManager</code> function change<a class="headerlink" href="#packagemanagernewpackagemanager-function-change" title="Permanent link">&para;</a></h3>
<p>A new argument <code>userAgent</code> has been added to <code>packagemanager.NewPackageManager</code>, the new function signature is:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">NewPackageManager</span><span class="p">(</span><span class="nx">indexDir</span><span class="p">,</span><span class="w"> </span><span class="nx">packagesDir</span><span class="p">,</span><span class="w"> </span><span class="nx">downloadDir</span><span class="p">,</span><span class="w"> </span><span class="nx">tempDir</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">userAgent</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">PackageManager</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>The userAgent string must be in the format <code>"ProgramName/Version"</code>, for example <code>"arduino-cli/0.20.1"</code>.</p>
<h3 id="commandscreate-function-change"><code>commands.Create</code> function change<a class="headerlink" href="#commandscreate-function-change" title="Permanent link">&para;</a></h3>
<p>A new argument <code>extraUserAgent</code> has been added to <code>commands.Create</code>, the new function signature is:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">Create</span><span class="p">(</span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">CreateRequest</span><span class="p">,</span><span class="w"> </span><span class="nx">extraUserAgent</span><span class="w"> </span><span class="o">...</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">CreateResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p><code>extraUserAgent</code> is an array of strings, so multiple user agent may be provided. Each user agent must be in the format
<code>"ProgramName/Version"</code>, for example <code>"arduino-cli/0.20.1"</code>.</p>
<h3 id="commandscompile-function-change"><code>commands.Compile</code> function change<a class="headerlink" href="#commandscompile-function-change" title="Permanent link">&para;</a></h3>
<p>A new argument <code>progressCB</code> has been added to <code>commands.Compile</code>, the new function signature is:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">Compile</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">CompileRequest</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">outStream</span><span class="p">,</span><span class="w"> </span><span class="nx">errStream</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">progressCB</span><span class="w"> </span><span class="nx">commands</span><span class="p">.</span><span class="nx">TaskProgressCB</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">debug</span><span class="w"> </span><span class="kt">bool</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">CompileResponse</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>if a callback function is provided the <code>Compile</code> command will call it periodically with progress reports with the
percentage of compilation completed, otherwise, if the parameter is <code>nil</code>, no progress reports will be performed.</p>
<h3 id="githubcomarduinoarduino-clicliargumentsparsereferences-function-change"><code>github.com/arduino/arduino-cli/cli/arguments.ParseReferences</code> function change<a class="headerlink" href="#githubcomarduinoarduino-clicliargumentsparsereferences-function-change" title="Permanent link">&para;</a></h3>
<p>The <code>parseArch</code> parameter was removed since it was unused and was always true. This means that the architecture gets
always parsed by the function.</p>
<h3 id="githubcomarduinoarduino-clicliargumentsparsereference-function-change"><code>github.com/arduino/arduino-cli/cli/arguments.ParseReference</code> function change<a class="headerlink" href="#githubcomarduinoarduino-clicliargumentsparsereference-function-change" title="Permanent link">&para;</a></h3>
<p>The <code>parseArch</code> parameter was removed since it was unused and was always true. This means that the architecture gets
always parsed by the function. Furthermore the function now should also correctly interpret <code>packager:arch</code> spelled with
the wrong casing.</p>
<h3 id="githubcomarduinoarduino-cliexecutilsnewprocess-and-executilsnewprocessfrompath-function-change"><code>github.com/arduino/arduino-cli/executils.NewProcess</code> and <code>executils.NewProcessFromPath</code> function change<a class="headerlink" href="#githubcomarduinoarduino-cliexecutilsnewprocess-and-executilsnewprocessfrompath-function-change" title="Permanent link">&para;</a></h3>
<p>A new argument <code>extraEnv</code> has been added to <code>executils.NewProcess</code> and <code>executils.NewProcessFromPath</code>, the new function
signature is:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">NewProcess</span><span class="p">(</span><span class="nx">extraEnv</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">...</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">Process</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">NewProcessFromPath</span><span class="p">(</span><span class="nx">extraEnv</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">executable</span><span class="w"> </span><span class="o">*</span><span class="nx">paths</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">...</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">Process</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>The <code>extraEnv</code> params allow to pass environment variables (in addition to the default ones) to the spawned process.</p>
<h3 id="githubcomarduinoarduino-clii18ninit-now-requires-an-empty-string-to-be-passed-for-autodetection-of-locale"><code>github.com/arduino/arduino-cli/i18n.Init(...)</code> now requires an empty string to be passed for autodetection of locale<a class="headerlink" href="#githubcomarduinoarduino-clii18ninit-now-requires-an-empty-string-to-be-passed-for-autodetection-of-locale" title="Permanent link">&para;</a></h3>
<p>For automated detection of locale, change the call from:</p>
<div class="highlight"><pre><span></span><code><span class="nx">i18n</span><span class="p">.</span><span class="nx">Init</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>to</p>
<div class="highlight"><pre><span></span><code><span class="nx">i18n</span><span class="p">.</span><span class="nx">Init</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h3 id="githubcomarduinoarduino-clilegacyi18n-module-has-been-removed-in-particular-the-i18nlogger"><code>github.com/arduino/arduino-cli/legacy/i18n</code> module has been removed (in particular the <code>i18n.Logger</code>)<a class="headerlink" href="#githubcomarduinoarduino-clilegacyi18n-module-has-been-removed-in-particular-the-i18nlogger" title="Permanent link">&para;</a></h3>
<p>The <code>i18n.Logger</code> is no longer available. It was mainly used in the legacy builder struct field <code>Context.Logger</code>.</p>
<p>The <code>Context.Logger</code> field has been replaced with plain <code>io.Writer</code> fields <code>Contex.Stdout</code> and <code>Context.Stderr</code>. All
existing logger functionality has been dropped, for example the Java-Style formatting with tags like <code>{0} {1}...</code> must
be replaced with one of the equivalent golang printf-based alternatives and logging levels must be replaced with direct
writes to <code>Stdout</code> or <code>Stderr</code>.</p>
<h2 id="0200">0.20.0<a class="headerlink" href="#0200" title="Permanent link">&para;</a></h2>
<h3 id="board-details-arguments-change"><code>board details</code> arguments change<a class="headerlink" href="#board-details-arguments-change" title="Permanent link">&para;</a></h3>
<p>The <code>board details</code> command now accepts only the <code>--fqbn</code> or <code>-b</code> flags to specify the FQBN.</p>
<p>The previously deprecated <code>board details &lt;FQBN&gt;</code> syntax is no longer supported.</p>
<h3 id="board-attach-arguments-change"><code>board attach</code> arguments change<a class="headerlink" href="#board-attach-arguments-change" title="Permanent link">&para;</a></h3>
<p>The <code>board attach</code> command now uses <code>--port</code> and <code>-p</code> flags to set board port and <code>--board</code> and <code>-b</code> flags to select its
FQBN.</p>
<p>The previous syntax <code>board attach &lt;port&gt;|&lt;FQBN&gt; [sketchPath]</code> is no longer supported.</p>
<h3 id="-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout"><code>--timeout</code> flag in <code>board list</code> command has been replaced by <code>--discovery-timeout</code><a class="headerlink" href="#-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout" title="Permanent link">&para;</a></h3>
<p>The flag <code>--timeout</code> in the <code>board list</code> command is no longer supported.</p>
<h2 id="0190">0.19.0<a class="headerlink" href="#0190" title="Permanent link">&para;</a></h2>
<h3 id="board-list-command-json-output-change"><code>board list</code> command JSON output change<a class="headerlink" href="#board-list-command-json-output-change" title="Permanent link">&para;</a></h3>
<p>The <code>board list</code> command JSON output has been changed quite a bit, from:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board list --format json
[
  {
    &quot;address&quot;: &quot;/dev/ttyACM1&quot;,
    &quot;protocol&quot;: &quot;serial&quot;,
    &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
    &quot;boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Uno&quot;,
        &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x0043&quot;
      }
    ],
    &quot;serial_number&quot;: &quot;954323132383515092E1&quot;
  }
]
</code></pre></div>
<p>to:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board list --format json
[
  {
    &quot;matching_boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Uno&quot;,
        &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;
      }
    ],
    &quot;port&quot;: {
      &quot;address&quot;: &quot;/dev/ttyACM1&quot;,
      &quot;label&quot;: &quot;/dev/ttyACM1&quot;,
      &quot;protocol&quot;: &quot;serial&quot;,
      &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x0043&quot;,
        &quot;serialNumber&quot;: &quot;954323132383515092E1&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    }
  }
]
</code></pre></div>
<p>The <code>boards</code> array has been renamed <code>matching_boards</code>, each contained object will now contain only <code>name</code> and <code>fqbn</code>.
Properties that can be used to identify a board are now moved to the new <code>properties</code> object, it can contain any key
name. <code>pid</code> and <code>vid</code> have been moved to <code>properties</code>, <code>serial_number</code> has been renamed <code>serialNumber</code> and moved to
<code>properties</code>. The new <code>label</code> field is the name of the <code>port</code> if it should be displayed in a GUI.</p>
<h3 id="grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes">gRPC interface <code>DebugConfigRequest</code>, <code>UploadRequest</code>, <code>UploadUsingProgrammerRequest</code>, <code>BurnBootloaderRequest</code>, <code>DetectedPort</code> field changes<a class="headerlink" href="#grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes" title="Permanent link">&para;</a></h3>
<p><code>DebugConfigRequest</code>, <code>UploadRequest</code>, <code>UploadUsingProgrammerRequest</code> and <code>BurnBootloaderRequest</code> had their <code>port</code> field
change from type <code>string</code> to <code>Port</code>.</p>
<p><code>Port</code> contains the following information:</p>
<div class="highlight"><pre><span></span><code>// Port represents a board port that may be used to upload or to monitor a board
message Port {
  // Address of the port (e.g., `/dev/ttyACM0`).
  string address = 1;
  // The port label to show on the GUI (e.g. &quot;ttyACM0&quot;)
  string label = 2;
  // Protocol of the port (e.g., `serial`, `network`, ...).
  string protocol = 3;
  // A human friendly description of the protocol (e.g., &quot;Serial Port (USB)&quot;
  string protocol_label = 4;
  // A set of properties of the port
  map&lt;string, string&gt; properties = 5;
}
</code></pre></div>
<p>The gRPC interface message <code>DetectedPort</code> has been changed from:</p>
<div class="highlight"><pre><span></span><code>message DetectedPort {
  // Address of the port (e.g., `serial:///dev/ttyACM0`).
  string address = 1;
  // Protocol of the port (e.g., `serial`).
  string protocol = 2;
  // A human friendly description of the protocol (e.g., &quot;Serial Port (USB)&quot;).
  string protocol_label = 3;
  // The boards attached to the port.
  repeated BoardListItem boards = 4;
  // Serial number of connected board
  string serial_number = 5;
}
</code></pre></div>
<p>to:</p>
<div class="highlight"><pre><span></span><code>message DetectedPort {
  // The possible boards attached to the port.
  repeated BoardListItem matching_boards = 1;
  // The port details
  Port port = 2;
}
</code></pre></div>
<p>The properties previously contained directly in the message are now stored in the <code>port</code> property.</p>
<p>These changes are necessary for the pluggable discovery.</p>
<h3 id="grpc-interface-boardlistitem-change">gRPC interface <code>BoardListItem</code> change<a class="headerlink" href="#grpc-interface-boardlistitem-change" title="Permanent link">&para;</a></h3>
<p>The <code>vid</code> and <code>pid</code> fields of the <code>BoardListItem</code> message have been removed. They used to only be available when
requesting connected board lists, now that information is stored in the <code>port</code> field of <code>DetectedPort</code>.</p>
<h3 id="change-public-library-interface">Change public library interface<a class="headerlink" href="#change-public-library-interface" title="Permanent link">&para;</a></h3>
<h4 id="githubcomarduinoarduino-clii18n-package"><code>github.com/arduino/arduino-cli/i18n</code> package<a class="headerlink" href="#githubcomarduinoarduino-clii18n-package" title="Permanent link">&para;</a></h4>
<p>The behavior of the <code>Init</code> function has changed. The user specified locale code is no longer read from the
<code>github.com/arduino/arduino-cli/configuration</code> package and now must be passed directly to <code>Init</code> as a string:</p>
<div class="highlight"><pre><span></span><code><span class="nx">i18n</span><span class="p">.</span><span class="nx">Init</span><span class="p">(</span><span class="s">&quot;it&quot;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Omit the argument for automated locale detection:</p>
<div class="highlight"><pre><span></span><code><span class="nx">i18n</span><span class="p">.</span><span class="nx">Init</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<h4 id="githubcomarduinoarduino-cliarduinobuilder-package"><code>github.com/arduino/arduino-cli/arduino/builder</code> package<a class="headerlink" href="#githubcomarduinoarduino-cliarduinobuilder-package" title="Permanent link">&para;</a></h4>
<p><code>GenBuildPath()</code> function has been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package. The signature is
unchanged.</p>
<p><code>EnsureBuildPathExists</code> function from has been completely removed, in its place use
<code>github.com/arduino/go-paths-helper.MkDirAll()</code>.</p>
<p><code>SketchSaveItemCpp</code> function signature is changed from <code>path string, contents []byte, destPath string</code> to
<code>path *paths.Path, contents []byte, destPath *paths.Path</code>. <code>paths</code> is <code>github.com/arduino/go-paths-helper</code>.</p>
<p><code>SketchLoad</code> function has been removed, in its place use <code>New</code> from <code>github.com/arduino/arduino-cli/arduino/sketch</code>
package.</p>
<div class="highlight"><pre><span></span><code><span class="gd">-      SketchLoad(&quot;/some/path&quot;, &quot;&quot;)</span><span class="w"></span>
<span class="gi">+      sketch.New(paths.New(&quot;some/path))</span><span class="w"></span>
<span class="w">}</span>
</code></pre></div>
<p>If you need to set a custom build path you must instead set it after creating the Sketch.</p>
<div class="highlight"><pre><span></span><code><span class="gd">-      SketchLoad(&quot;/some/path&quot;, &quot;/my/build/path&quot;)</span><span class="w"></span>
<span class="gi">+      s, err := sketch.New(paths.New(&quot;some/path))</span><span class="w"></span>
<span class="gi">+      s.BuildPath = paths.new(&quot;/my/build/path&quot;)</span><span class="w"></span>
<span class="w">}</span>
</code></pre></div>
<p><code>SketchCopyAdditionalFiles</code> function signature is changed from
<code>sketch *sketch.Sketch, destPath string, overrides map[string]string</code> to
<code>sketch *sketch.Sketch, destPath *paths.Path, overrides map[string]string</code>.</p>
<h4 id="githubcomarduinoarduino-cliarduinosketch-package"><code>github.com/arduino/arduino-cli/arduino/sketch</code> package<a class="headerlink" href="#githubcomarduinoarduino-cliarduinosketch-package" title="Permanent link">&para;</a></h4>
<p><code>Item</code> struct has been removed, use <code>go-paths-helper.Path</code> in its place.</p>
<p><code>NewItem</code> has been removed too, use <code>go-paths-helper.New</code> in its place.</p>
<p><code>GetSourceBytes</code> has been removed, in its place use <code>go-paths-helper.Path.ReadFile</code>. <code>GetSourceStr</code> too has been
removed, in its place:</p>
<div class="highlight"><pre><span></span><code><span class="gd">-      s, err := item.GetSourceStr()</span><span class="w"></span>
<span class="gi">+      data, err := file.ReadFile()</span><span class="w"></span>
<span class="gi">+      s := string(data)</span><span class="w"></span>
<span class="w">}</span>
</code></pre></div>
<p><code>ItemByPath</code> type and its member functions have been removed, use <code>go-paths-helper.PathList</code> in its place.</p>
<p><code>Sketch.LocationPath</code> has been renamed to <code>FullPath</code> and its type changed from <code>string</code> to <code>go-paths-helper.Path</code>.</p>
<p><code>Sketch.MainFile</code> type has changed from <code>*Item</code> to <code>go-paths-helper.Path</code>. <code>Sketch.OtherSketchFiles</code>,
<code>Sketch.AdditionalFiles</code> and <code>Sketch.RootFolderFiles</code> type has changed from <code>[]*Item</code> to <code>go-paths-helper.PathList</code>.</p>
<p><code>New</code> signature has been changed from <code>sketchFolderPath, mainFilePath, buildPath string, allFilesPaths []string</code> to
<code>path *go-paths-helper.Path</code>.</p>
<p><code>CheckSketchCasing</code> function is now private, the check is done internally by <code>New</code>.</p>
<p><code>InvalidSketchFoldernameError</code> has been renamed <code>InvalidSketchFolderNameError</code>.</p>
<h4 id="githubcomarduinoarduino-cliarduinosketches-package"><code>github.com/arduino/arduino-cli/arduino/sketches</code> package<a class="headerlink" href="#githubcomarduinoarduino-cliarduinosketches-package" title="Permanent link">&para;</a></h4>
<p><code>Sketch</code> struct has been merged with <code>sketch.Sketch</code> struct.</p>
<p><code>Metadata</code> and <code>BoardMetadata</code> structs have been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package.</p>
<p><code>NewSketchFromPath</code> has been deleted, use <code>sketch.New</code> in its place.</p>
<p><code>ImportMetadata</code> is now private called internally by <code>sketch.New</code>.</p>
<p><code>ExportMetadata</code> has been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package.</p>
<p><code>BuildPath</code> has been removed, use <code>sketch.Sketch.BuildPath</code> in its place.</p>
<p><code>CheckForPdeFiles</code> has been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package.</p>
<h4 id="githubcomarduinoarduino-clilegacybuildertypes-package"><code>github.com/arduino/arduino-cli/legacy/builder/types</code> package<a class="headerlink" href="#githubcomarduinoarduino-clilegacybuildertypes-package" title="Permanent link">&para;</a></h4>
<p><code>Sketch</code> has been removed, use <code>sketch.Sketch</code> in its place.</p>
<p><code>SketchToLegacy</code> and <code>SketchFromLegacy</code> have been removed, nothing replaces them.</p>
<p><code>Context.Sketch</code> types has been changed from <code>Sketch</code> to <code>sketch.Sketch</code>.</p>
<h3 id="change-in-board-details-response-grpc-and-json-output">Change in <code>board details</code> response (gRPC and JSON output)<a class="headerlink" href="#change-in-board-details-response-grpc-and-json-output" title="Permanent link">&para;</a></h3>
<p>The <code>board details</code> output WRT board identification properties has changed, before it was:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board details arduino:samd:mkr1000
Board name:                Arduino MKR1000
FQBN:                      arduino:samd:mkr1000
Board version:             1.8.11
Debugging supported:       ✔

Official Arduino board:    ✔

Identification properties: VID:0x2341 PID:0x824e
                           VID:0x2341 PID:0x024e
                           VID:0x2341 PID:0x804e
                           VID:0x2341 PID:0x004e
[...]

$ arduino-cli board details arduino:samd:mkr1000 --format json
[...]
  &quot;identification_prefs&quot;: [
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x804e&quot;
      }
    },
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x004e&quot;
      }
    },
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x824e&quot;
      }
    },
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x024e&quot;
      }
    }
  ],
[...]
</code></pre></div>
<p>now the properties have been renamed from <code>identification_prefs</code> to <code>identification_properties</code> and they are no longer
specific to USB but they can theoretically be any set of key/values:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board details arduino:samd:mkr1000
Board name:                Arduino MKR1000
FQBN:                      arduino:samd:mkr1000
Board version:             1.8.11
Debugging supported:       ✔

Official Arduino board:    ✔

Identification properties: vid=0x2341
                           pid=0x804e

Identification properties: vid=0x2341
                           pid=0x004e

Identification properties: vid=0x2341
                           pid=0x824e

Identification properties: vid=0x2341
                           pid=0x024e
[...]

$ arduino-cli board details arduino:samd:mkr1000 --format json
[...]
  &quot;identification_properties&quot;: [
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x804e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    },
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x004e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    },
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x824e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    },
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x024e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    }
  ]
}
</code></pre></div>
<h3 id="change-of-behaviour-of-grpc-init-function">Change of behaviour of gRPC <code>Init</code> function<a class="headerlink" href="#change-of-behaviour-of-grpc-init-function" title="Permanent link">&para;</a></h3>
<p>Previously the <code>Init</code> function was used to both create a new <code>CoreInstance</code> and initialize it, so that the internal
package and library managers were already populated with all the information available from <code>*_index.json</code> files,
installed platforms and libraries and so on.</p>
<p>Now the initialization phase is split into two, first the client must create a new <code>CoreInstance</code> with the <code>Create</code>
function, that does mainly two things:</p>
<ul>
<li>create all folders necessary to correctly run the CLI if not already existing</li>
<li>create and return a new <code>CoreInstance</code></li>
</ul>
<p>The <code>Create</code> function will only fail if folders creation is not successful.</p>
<p>The returned instance is relatively unusable since no library and no platform is loaded, some functions that don't need
that information can still be called though.</p>
<p>The <code>Init</code> function has been greatly overhauled and it doesn't fail completely if one or more platforms or libraries
fail to load now.</p>
<p>Also the option <code>library_manager_only</code> has been removed, the package manager is always initialized and platforms are
loaded.</p>
<p>The <code>Init</code> was already a server-side streaming function but it would always return one and only one response, this has
been modified so that each response is either an error or a notification on the initialization process so that it works
more like an actual stream of information.</p>
<p>Previously a client would call the function like so:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">initReq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">InitRequest</span><span class="p">()</span><span class="w"></span>
<span class="nx">initReq</span><span class="p">.</span><span class="nx">setLibraryManagerOnly</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">initResp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">InitResponse</span><span class="o">&gt;</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">resp</span><span class="o">:</span><span class="w"> </span><span class="kt">InitResponse</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">undefined</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">initReq</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">InitResponse</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">resp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">))</span><span class="w"></span>
<span class="w">  </span><span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">resp</span><span class="o">!</span><span class="p">))</span><span class="w"></span>
<span class="w">  </span><span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">initResp</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">()</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">instance</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Could not retrieve instance from the initialize response.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Now something similar should be done.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">createReq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CreateRequest</span><span class="p">()</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">createReq</span><span class="p">)</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">instance</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Could not retrieve instance from the initialize response.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">initReq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">InitRequest</span><span class="p">()</span><span class="w"></span>
<span class="nx">initReq</span><span class="p">.</span><span class="nx">setInstance</span><span class="p">(</span><span class="nx">instance</span><span class="p">)</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">initResp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">initReq</span><span class="p">)</span><span class="w"></span>
<span class="nx">initResp</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">o</span><span class="o">:</span><span class="w"> </span><span class="kt">InitResponse</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">downloadProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">o</span><span class="p">.</span><span class="nx">getDownloadProgress</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">downloadProgress</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Handle download progress</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">taskProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">o</span><span class="p">.</span><span class="nx">getTaskProgress</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">taskProgress</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Handle task progress</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">o</span><span class="p">.</span><span class="nx">getError</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Handle error</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>

<span class="k">await</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nx">initResp</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span><span class="w"></span>
<span class="w">  </span><span class="nx">initResp</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">resolve</span><span class="p">)</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<p>Previously if even one platform or library failed to load everything else would fail too, that doesn't happen anymore.
Now it's easier for both the CLI and the gRPC clients to handle gracefully platforms or libraries updates that might
break the initialization step and make everything unusable.</p>
<h3 id="removal-of-grpc-rescan-function">Removal of gRPC <code>Rescan</code> function<a class="headerlink" href="#removal-of-grpc-rescan-function" title="Permanent link">&para;</a></h3>
<p>The <code>Rescan</code> function has been removed, in its place the <code>Init</code> function must be used.</p>
<h3 id="change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions">Change of behaviour of gRPC <code>UpdateIndex</code> and <code>UpdateLibrariesIndex</code> functions<a class="headerlink" href="#change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions" title="Permanent link">&para;</a></h3>
<p>Previously both <code>UpdateIndex</code> and <code>UpdateLibrariesIndex</code> functions implicitly called <code>Rescan</code> so that the internal
<code>CoreInstance</code> was updated with the eventual new information obtained in the update.</p>
<p>This behaviour is now removed and the internal <code>CoreInstance</code> must be explicitly updated by the gRPC client using the
<code>Init</code> function.</p>
<h3 id="removed-rarely-used-golang-api">Removed rarely used golang API<a class="headerlink" href="#removed-rarely-used-golang-api" title="Permanent link">&para;</a></h3>
<p>The following function from the <code>github.com/arduino/arduino-cli/arduino/libraries</code> module is no longer available:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">lm</span><span class="w"> </span><span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span><span class="w"> </span><span class="nx">UpdateIndex</span><span class="p">(</span><span class="nx">config</span><span class="w"> </span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Downloader</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>We recommend using the equivalent gRPC API to perform the update of the index.</p>
<h2 id="0180">0.18.0<a class="headerlink" href="#0180" title="Permanent link">&para;</a></h2>
<h3 id="breaking-changes-in-grpc-api-and-cli-json-output">Breaking changes in gRPC API and CLI JSON output.<a class="headerlink" href="#breaking-changes-in-grpc-api-and-cli-json-output" title="Permanent link">&para;</a></h3>
<p>Starting from this release we applied a more rigorous and stricter naming conventions in gRPC API following the official
guidelines: <a href="https://developers.google.com/protocol-buffers/docs/style">https://developers.google.com/protocol-buffers/docs/style</a></p>
<p>We also started using a linter to implement checks for gRPC API style errors.</p>
<p>This provides a better consistency and higher quality API but inevitably introduces breaking changes.</p>
<h3 id="grpc-api-breaking-changes">gRPC API breaking changes<a class="headerlink" href="#grpc-api-breaking-changes" title="Permanent link">&para;</a></h3>
<p>Consumers of the gRPC API should regenerate their bindings and update all structures naming where necessary. Most of the
changes are trivial and falls into the following categories:</p>
<ul>
<li>Service names have been suffixed with <code>...Service</code> (for example <code>ArduinoCore</code> -&gt; <code>ArduinoCoreService</code>)</li>
<li>Message names suffix has been changed from <code>...Req</code>/<code>...Resp</code> to <code>...Request</code>/<code>...Response</code> (for example
  <code>BoardDetailsReq</code> -&gt; <code>BoardDetailsRequest</code>)</li>
<li>Enumerations now have their class name prefixed (for example the enumeration value <code>FLAT</code> in <code>LibraryLayout</code> has been
  changed to <code>LIBRARY_LAYOUT_FLAT</code>)</li>
<li>Use of lower-snake case on all fields (for example: <code>ID</code> -&gt; <code>id</code>, <code>FQBN</code> -&gt; <code>fqbn</code>, <code>Name</code> -&gt; <code>name</code>,
  <code>ArchiveFilename</code> -&gt; <code>archive_filename</code>)</li>
<li>Package names are now versioned (for example <code>cc.arduino.cli.commands</code> -&gt; <code>cc.arduino.cli.commands.v1</code>)</li>
<li>Repeated responses are now in plural form (<code>identification_pref</code> -&gt; <code>identification_prefs</code>, <code>platform</code> -&gt; <code>platforms</code>)</li>
</ul>
<h3 id="arduino-cli-json-output-breaking-changes">arduino-cli JSON output breaking changes<a class="headerlink" href="#arduino-cli-json-output-breaking-changes" title="Permanent link">&para;</a></h3>
<p>Consumers of the JSON output of the CLI must update their clients if they use one of the following commands:</p>
<ul>
<li>
<p>in <code>core search</code> command the following fields have been renamed:</p>
<ul>
<li><code>Boards</code> -&gt; <code>boards</code></li>
<li><code>Email</code> -&gt; <code>email</code></li>
<li><code>ID</code> -&gt; <code>id</code></li>
<li><code>Latest</code> -&gt; <code>latest</code></li>
<li><code>Maintainer</code> -&gt; <code>maintainer</code></li>
<li><code>Name</code> -&gt; <code>name</code></li>
<li><code>Website</code> -&gt; <code>website</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli core search Due --format json
[
  {
    &quot;id&quot;: &quot;arduino:sam&quot;,
    &quot;latest&quot;: &quot;1.6.12&quot;,
    &quot;name&quot;: &quot;Arduino SAM Boards (32-bits ARM Cortex-M3)&quot;,
    &quot;maintainer&quot;: &quot;Arduino&quot;,
    &quot;website&quot;: &quot;http://www.arduino.cc/&quot;,
    &quot;email&quot;: &quot;packages@arduino.cc&quot;,
    &quot;boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Due (Native USB Port)&quot;,
        &quot;fqbn&quot;: &quot;arduino:sam:arduino_due_x&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Due (Programming Port)&quot;,
        &quot;fqbn&quot;: &quot;arduino:sam:arduino_due_x_dbg&quot;
      }
    ]
  }
]
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board details</code> command the following fields have been renamed:</p>
<ul>
<li><code>identification_pref</code> -&gt; <code>identification_prefs</code></li>
<li><code>usbID</code> -&gt; <code>usb_id</code></li>
<li><code>PID</code> -&gt; <code>pid</code></li>
<li><code>VID</code> -&gt; <code>vid</code></li>
<li><code>websiteURL</code> -&gt; <code>website_url</code></li>
<li><code>archiveFileName</code> -&gt; <code>archive_filename</code></li>
<li><code>propertiesId</code> -&gt; <code>properties_id</code></li>
<li><code>toolsDependencies</code> -&gt; <code>tools_dependencies</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board details arduino:avr:uno --format json
{
  &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
  &quot;name&quot;: &quot;Arduino Uno&quot;,
  &quot;version&quot;: &quot;1.8.3&quot;,
  &quot;properties_id&quot;: &quot;uno&quot;,
  &quot;official&quot;: true,
  &quot;package&quot;: {
    &quot;maintainer&quot;: &quot;Arduino&quot;,
    &quot;url&quot;: &quot;https://downloads.arduino.cc/packages/package_index.json&quot;,
    &quot;website_url&quot;: &quot;http://www.arduino.cc/&quot;,
    &quot;email&quot;: &quot;packages@arduino.cc&quot;,
    &quot;name&quot;: &quot;arduino&quot;,
    &quot;help&quot;: {
      &quot;online&quot;: &quot;http://www.arduino.cc/en/Reference/HomePage&quot;
    }
  },
  &quot;platform&quot;: {
    &quot;architecture&quot;: &quot;avr&quot;,
    &quot;category&quot;: &quot;Arduino&quot;,
    &quot;url&quot;: &quot;http://downloads.arduino.cc/cores/avr-1.8.3.tar.bz2&quot;,
    &quot;archive_filename&quot;: &quot;avr-1.8.3.tar.bz2&quot;,
    &quot;checksum&quot;: &quot;SHA-256:de8a9b982477762d3d3e52fc2b682cdd8ff194dc3f1d46f4debdea6a01b33c14&quot;,
    &quot;size&quot;: 4941548,
    &quot;name&quot;: &quot;Arduino AVR Boards&quot;
  },
  &quot;tools_dependencies&quot;: [
    {
      &quot;packager&quot;: &quot;arduino&quot;,
      &quot;name&quot;: &quot;avr-gcc&quot;,
      &quot;version&quot;: &quot;7.3.0-atmel3.6.1-arduino7&quot;,
      &quot;systems&quot;: [
        {
          &quot;checksum&quot;: &quot;SHA-256:3903553d035da59e33cff9941b857c3cb379cb0638105dfdf69c97f0acc8e7b5&quot;,
          &quot;host&quot;: &quot;arm-linux-gnueabihf&quot;,
          &quot;archive_filename&quot;: &quot;avr-gcc-7.3.0-atmel3.6.1-arduino7-arm-linux-gnueabihf.tar.bz2&quot;,
          &quot;url&quot;: &quot;http://downloads.arduino.cc/tools/avr-gcc-7.3.0-atmel3.6.1-arduino7-arm-linux-gnueabihf.tar.bz2&quot;,
          &quot;size&quot;: 34683056
        },
        { ... }
      ]
    },
    { ... }
  ],
  &quot;identification_prefs&quot;: [
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x0043&quot;
      }
    },
    { ... }
  ],
  &quot;programmers&quot;: [
    {
      &quot;platform&quot;: &quot;Arduino AVR Boards&quot;,
      &quot;id&quot;: &quot;parallel&quot;,
      &quot;name&quot;: &quot;Parallel Programmer&quot;
    },
    { ... }
  ]
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board listall</code> command the following fields have been renamed:</p>
<ul>
<li><code>FQBN</code> -&gt; <code>fqbn</code></li>
<li><code>Email</code> -&gt; <code>email</code></li>
<li><code>ID</code> -&gt; <code>id</code></li>
<li><code>Installed</code> -&gt; <code>installed</code></li>
<li><code>Latest</code> -&gt; <code>latest</code></li>
<li><code>Name</code> -&gt; <code>name</code></li>
<li><code>Maintainer</code> -&gt; <code>maintainer</code></li>
<li><code>Website</code> -&gt; <code>website</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board listall Uno --format json
{
  &quot;boards&quot;: [
    {
      &quot;name&quot;: &quot;Arduino Uno&quot;,
      &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
      &quot;platform&quot;: {
        &quot;id&quot;: &quot;arduino:avr&quot;,
        &quot;installed&quot;: &quot;1.8.3&quot;,
        &quot;latest&quot;: &quot;1.8.3&quot;,
        &quot;name&quot;: &quot;Arduino AVR Boards&quot;,
        &quot;maintainer&quot;: &quot;Arduino&quot;,
        &quot;website&quot;: &quot;http://www.arduino.cc/&quot;,
        &quot;email&quot;: &quot;packages@arduino.cc&quot;
      }
    }
  ]
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board search</code> command the following fields have been renamed:</p>
<ul>
<li><code>FQBN</code> -&gt; <code>fqbn</code></li>
<li><code>Email</code> -&gt; <code>email</code></li>
<li><code>ID</code> -&gt; <code>id</code></li>
<li><code>Installed</code> -&gt; <code>installed</code></li>
<li><code>Latest</code> -&gt; <code>latest</code></li>
<li><code>Name</code> -&gt; <code>name</code></li>
<li><code>Maintainer</code> -&gt; <code>maintainer</code></li>
<li><code>Website</code> -&gt; <code>website</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board search Uno --format json
[
  {
    &quot;name&quot;: &quot;Arduino Uno&quot;,
    &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
    &quot;platform&quot;: {
      &quot;id&quot;: &quot;arduino:avr&quot;,
      &quot;installed&quot;: &quot;1.8.3&quot;,
      &quot;latest&quot;: &quot;1.8.3&quot;,
      &quot;name&quot;: &quot;Arduino AVR Boards&quot;,
      &quot;maintainer&quot;: &quot;Arduino&quot;,
      &quot;website&quot;: &quot;http://www.arduino.cc/&quot;,
      &quot;email&quot;: &quot;packages@arduino.cc&quot;
    }
  }
]
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>lib deps</code> command the following fields have been renamed:</p>
<ul>
<li><code>versionRequired</code> -&gt; <code>version_required</code></li>
<li><code>versionInstalled</code> -&gt; <code>version_installed</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli lib deps Arduino_MKRIoTCarrier --format json
{
  &quot;dependencies&quot;: [
    {
      &quot;name&quot;: &quot;Adafruit seesaw Library&quot;,
      &quot;version_required&quot;: &quot;1.3.1&quot;
    },
    {
      &quot;name&quot;: &quot;SD&quot;,
      &quot;version_required&quot;: &quot;1.2.4&quot;,
      &quot;version_installed&quot;: &quot;1.2.3&quot;
    },
    { ... }
  ]
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>lib search</code> command the following fields have been renamed:</p>
<ul>
<li><code>archivefilename</code> -&gt; <code>archive_filename</code></li>
<li><code>cachepath</code> -&gt; <code>cache_path</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli lib search NTPClient --format json
{
  &quot;libraries&quot;: [
    {
      &quot;name&quot;: &quot;NTPClient&quot;,
      &quot;releases&quot;: {
        &quot;1.0.0&quot;: {
          &quot;author&quot;: &quot;Fabrice Weinberg&quot;,
          &quot;version&quot;: &quot;1.0.0&quot;,
          &quot;maintainer&quot;: &quot;Fabrice Weinberg \u003cfabrice@weinberg.me\u003e&quot;,
          &quot;sentence&quot;: &quot;An NTPClient to connect to a time server&quot;,
          &quot;paragraph&quot;: &quot;Get time from a NTP server and keep it in sync.&quot;,
          &quot;website&quot;: &quot;https://github.com/FWeinb/NTPClient&quot;,
          &quot;category&quot;: &quot;Timing&quot;,
          &quot;architectures&quot;: [
            &quot;esp8266&quot;
          ],
          &quot;types&quot;: [
            &quot;Arduino&quot;
          ],
          &quot;resources&quot;: {
            &quot;url&quot;: &quot;https://downloads.arduino.cc/libraries/github.com/arduino-libraries/NTPClient-1.0.0.zip&quot;,
            &quot;archive_filename&quot;: &quot;NTPClient-1.0.0.zip&quot;,
            &quot;checksum&quot;: &quot;SHA-256:b1f2907c9d51ee253bad23d05e2e9c1087ab1e7ba3eb12ee36881ba018d81678&quot;,
            &quot;size&quot;: 6284,
            &quot;cache_path&quot;: &quot;libraries&quot;
          }
        },
        &quot;2.0.0&quot;: { ... },
        &quot;3.0.0&quot;: { ... },
        &quot;3.1.0&quot;: { ... },
        &quot;3.2.0&quot;: { ... }
      },
      &quot;latest&quot;: {
        &quot;author&quot;: &quot;Fabrice Weinberg&quot;,
        &quot;version&quot;: &quot;3.2.0&quot;,
        &quot;maintainer&quot;: &quot;Fabrice Weinberg \u003cfabrice@weinberg.me\u003e&quot;,
        &quot;sentence&quot;: &quot;An NTPClient to connect to a time server&quot;,
        &quot;paragraph&quot;: &quot;Get time from a NTP server and keep it in sync.&quot;,
        &quot;website&quot;: &quot;https://github.com/arduino-libraries/NTPClient&quot;,
        &quot;category&quot;: &quot;Timing&quot;,
        &quot;architectures&quot;: [
          &quot;*&quot;
        ],
        &quot;types&quot;: [
          &quot;Arduino&quot;
        ],
        &quot;resources&quot;: {
          &quot;url&quot;: &quot;https://downloads.arduino.cc/libraries/github.com/arduino-libraries/NTPClient-3.2.0.zip&quot;,
          &quot;archive_filename&quot;: &quot;NTPClient-3.2.0.zip&quot;,
          &quot;checksum&quot;: &quot;SHA-256:122d00df276972ba33683aff0f7fe5eb6f9a190ac364f8238a7af25450fd3e31&quot;,
          &quot;size&quot;: 7876,
          &quot;cache_path&quot;: &quot;libraries&quot;
        }
      }
    }
  ],
  &quot;status&quot;: 1
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board list</code> command the following fields have been renamed:</p>
<ul>
<li><code>FQBN</code> -&gt; <code>fqbn</code></li>
<li><code>VID</code> -&gt; <code>vid</code></li>
<li><code>PID</code> -&gt; <code>pid</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board list --format json
[
  {
    &quot;address&quot;: &quot;/dev/ttyACM0&quot;,
    &quot;protocol&quot;: &quot;serial&quot;,
    &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
    &quot;boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino:mbed:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino-dev:mbed:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino-dev:nrf52:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino-beta:mbed:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      }
    ],
    &quot;serial_number&quot;: &quot;BECC45F754185EC9&quot;
  }
]
$ arduino-cli board list -w --format json
{
  &quot;type&quot;: &quot;add&quot;,
  &quot;address&quot;: &quot;/dev/ttyACM0&quot;,
  &quot;protocol&quot;: &quot;serial&quot;,
  &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
  &quot;boards&quot;: [
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino-dev:nrf52:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    },
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino-dev:mbed:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    },
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino-beta:mbed:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    },
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino:mbed:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    }
  ],
  &quot;serial_number&quot;: &quot;BECC45F754185EC9&quot;
}
{
  &quot;type&quot;: &quot;remove&quot;,
  &quot;address&quot;: &quot;/dev/ttyACM0&quot;
}
</code></pre></div>
</li>
</ul>
<h2 id="0160">0.16.0<a class="headerlink" href="#0160" title="Permanent link">&para;</a></h2>
<h3 id="change-type-of-compilereqexportbinaries-message-in-grpc-interface">Change type of <code>CompileReq.ExportBinaries</code> message in gRPC interface<a class="headerlink" href="#change-type-of-compilereqexportbinaries-message-in-grpc-interface" title="Permanent link">&para;</a></h3>
<p>This change affects only the gRPC consumers.</p>
<p>In the <code>CompileReq</code> message the <code>export_binaries</code> property type has been changed from <code>bool</code> to
<code>google.protobuf.BoolValue</code>. This has been done to handle settings bindings by gRPC consumers and the CLI in the same
way so that they an identical behaviour.</p>
<h2 id="0150">0.15.0<a class="headerlink" href="#0150" title="Permanent link">&para;</a></h2>
<h3 id="rename-telemetry-settings-to-metrics">Rename <code>telemetry</code> settings to <code>metrics</code><a class="headerlink" href="#rename-telemetry-settings-to-metrics" title="Permanent link">&para;</a></h3>
<p>All instances of the term <code>telemetry</code> in the code and the documentation has been changed to <code>metrics</code>. This has been
done to clarify that no data is currently gathered from users of the CLI.</p>
<p>To handle this change the users must edit their config file, usually <code>arduino-cli.yaml</code>, and change the <code>telemetry</code> key
to <code>metrics</code>. The modification must be done by manually editing the file using a text editor, it can't be done via CLI.
No other action is necessary.</p>
<p>The default folders for the <code>arduino-cli.yaml</code> are:</p>
<ul>
<li>Linux: <code>/home/&lt;your_username&gt;/.arduino15/arduino-cli.yaml</code></li>
<li>OS X: <code>/Users/&lt;your_username&gt;/Library/Arduino15/arduino-cli.yaml</code></li>
<li>Windows: <code>C:\Users\&lt;your_username&gt;\AppData\Local\Arduino15\arduino-cli.yaml</code></li>
</ul>
<h2 id="0140">0.14.0<a class="headerlink" href="#0140" title="Permanent link">&para;</a></h2>
<h3 id="changes-in-debug-command">Changes in <code>debug</code> command<a class="headerlink" href="#changes-in-debug-command" title="Permanent link">&para;</a></h3>
<p>Previously it was required:</p>
<ul>
<li>To provide a debug command line recipe in <code>platform.txt</code> like <code>tools.reciped-id.debug.pattern=.....</code> that will start a
  <code>gdb</code> session for the selected board.</li>
<li>To add a <code>debug.tool</code> definition in the <code>boards.txt</code> to recall that recipe, for example <code>myboard.debug.tool=recipe-id</code></li>
</ul>
<p>Now:</p>
<ul>
<li>Only the configuration needs to be supplied, the <code>arduino-cli</code> or the GUI tool will figure out how to call and setup
  the <code>gdb</code> session. An example of configuration is the following:</li>
</ul>
<div class="highlight"><pre><span></span><code>debug.executable={build.path}/{build.project_name}.elf
debug.toolchain=gcc
debug.toolchain.path={runtime.tools.arm-none-eabi-gcc-7-2017q4.path}/bin/
debug.toolchain.prefix=arm-none-eabi-
debug.server=openocd
debug.server.openocd.path={runtime.tools.openocd-0.10.0-arduino7.path}/bin/
debug.server.openocd.scripts_dir={runtime.tools.openocd-0.10.0-arduino7.path}/share/openocd/scripts/
debug.server.openocd.script={runtime.platform.path}/variants/{build.variant}/{build.openocdscript}
</code></pre></div>
<p>The <code>debug.server.XXXX</code> subkeys are optional and also "free text", this means that the configuration may be extended as
needed by the specific server. For now only <code>openocd</code> is supported. Anyway, if this change works, any other kind of
server may be fairly easily added.</p>
<p>The <code>debug.xxx=yyy</code> definitions above may be supplied and overlayed in the usual ways:</p>
<ul>
<li>on <code>platform.txt</code>: definition here will be shared through all boards in the platform</li>
<li>on <code>boards.txt</code> as part of a board definition: they will override the global platform definitions</li>
<li>on <code>programmers.txt</code>: they will override the boards and global platform definitions if the programmer is selected</li>
</ul>
<h3 id="binaries-export-must-now-be-explicitly-specified">Binaries export must now be explicitly specified<a class="headerlink" href="#binaries-export-must-now-be-explicitly-specified" title="Permanent link">&para;</a></h3>
<p>Previously, if the <code>--build-path</code> was not specified, compiling a Sketch would copy the generated binaries in
<code>&lt;sketch_folder&gt;/build/&lt;fqbn&gt;/</code>, uploading to a board required that path to exist and contain the necessary binaries.</p>
<p>The <code>--dry-run</code> flag was removed.</p>
<p>The default, <code>compile</code> does not copy generated binaries to the sketch folder. The <code>--export-binaries</code> (<code>-e</code>) flag was
introduced to copy the binaries from the build folder to the sketch one. <code>--export-binaries</code> is not required when using
the <code>--output-dir</code> flag. A related configuration key and environment variable has been added to avoid the need to always
specify the <code>--export-binaries</code> flag: <code>sketch.always_export_binaries</code> and <code>ARDUINO_SKETCH_ALWAYS_EXPORT_BINARIES</code>.</p>
<p>If <code>--input-dir</code> or <code>--input-file</code> is not set when calling <code>upload</code> the command will search for the deterministically
created build directory in the temp folder and use the binaries found there.</p>
<p>The gRPC interface has been updated accordingly, <code>dryRun</code> is removed.</p>
<h3 id="programmers-cant-be-listed-anymore-using-burn-bootloader-p-list">Programmers can't be listed anymore using <code>burn-bootloader -P list</code><a class="headerlink" href="#programmers-cant-be-listed-anymore-using-burn-bootloader-p-list" title="Permanent link">&para;</a></h3>
<p>The <code>-P</code> flag is used to select the programmer used to burn the bootloader on the specified board. Using <code>-P list</code> to
list all the possible programmers for the current board was hackish.</p>
<p>This way has been removed in favour of <code>board details &lt;fqbn&gt; --list-programmers</code>.</p>
<h3 id="lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled"><code>lib install --git-url</code> and <code>--zip-file</code> must now be explicitly enabled<a class="headerlink" href="#lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled" title="Permanent link">&para;</a></h3>
<p>With the introduction of the <code>--git-url</code> and <code>--zip-file</code> flags the new config key <code>library.enable_unsafe_install</code> has
been added to enable them.</p>
<p>This changes the ouput of the <code>config dump</code> command.</p>
<h3 id="change-behaviour-of-config-file-flag-with-config-commands">Change behaviour of <code>--config-file</code> flag with <code>config</code> commands<a class="headerlink" href="#change-behaviour-of-config-file-flag-with-config-commands" title="Permanent link">&para;</a></h3>
<p>To create a new config file with <code>config init</code> one must now use <code>--dest-dir</code> or the new <code>--dest-file</code> flags. Previously
the config file would always be overwritten by this command, now it fails if the it already exists, to force the
previous behaviour the user must set the <code>--overwrite</code> flag.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="../getting-started/" class="md-footer__link md-footer__link--next" aria-label="Next: Getting started" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Getting started
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright 2020 ARDUINO SA (http://www.arduino.cc/)
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.fcfe8b6d.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>